import{c as U,a as q,u as z,j as s,L as G,H as J}from"./app-LrsKmx93.js";import{A as O}from"./mobile-layout-X8LYD6LL.js";import{S as P}from"./save-Bsxb0-nE.js";/* empty css            */import"./app-sidebar-BJ8KpaQ-.js";import"./index-p0syaNOC.js";import"./x-Db2KilOX.js";import"./graduation-cap--arkKicv.js";import"./index-DFJIUhka.js";import"./layout-dashboard-DVszlXo4.js";import"./users-DpbnXvSk.js";function le(v){const e=U.c(52),{assessment:t,students:N}=v,[n,K]=q.useState(N);let i;e[0]!==N?(i=N.map(Q),e[0]=N,e[1]=i):i=e[1];let _;e[2]!==i?(_={scores:i},e[2]=i,e[3]=_):_=e[3];const{data:C,setData:D,post:E,processing:S}=z(_);let w;e[4]!==C||e[5]!==D?(w=(a,I)=>{const R=I===""?null:parseFloat(I);K(j=>j.map(M=>M.student.id===a?{...M,score:R}:M));const T=C.scores.map(j=>j.student_id===a?{...j,score:R}:j);D("scores",T)},e[4]=C,e[5]=D,e[6]=w):w=e[6];const L=w;let y;e[7]!==t.id||e[8]!==E?(y=a=>{a?.preventDefault(),E(`/assessments/scores/${t.id}`)},e[7]=t.id,e[8]=E,e[9]=y):y=e[9];const l=y,A=`/assessments/${t.teaching_assignment.id}`;let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(P,{className:"w-6 h-6"}),e[10]=k):k=e[10];let r;e[11]!==l?(r=()=>l(),e[11]=l,e[12]=r):r=e[12];const B=`Input Nilai - ${t.name}`;let c;e[13]!==B?(c=s.jsx(J,{title:B}),e[13]=B,e[14]=c):c=e[14];let m;e[15]!==t.name?(m=s.jsx("h2",{className:"text-xl font-semibold text-on-surface",children:t.name}),e[15]=t.name,e[16]=m):m=e[16];let o;e[17]!==t.teaching_assignment.class_group.name||e[18]!==t.teaching_assignment.subject.name?(o=s.jsxs("p",{className:"text-sm text-on-surface-variant",children:[t.teaching_assignment.subject.name," â€¢ ",t.teaching_assignment.class_group.name]}),e[17]=t.teaching_assignment.class_group.name,e[18]=t.teaching_assignment.subject.name,e[19]=o):o=e[19];let d;e[20]!==t.max_score?(d=s.jsxs("div",{className:"mt-3 inline-flex items-center px-3 py-1 rounded-full bg-surface-variant text-xs font-medium text-on-surface-variant",children:["Maksimal Nilai: ",t.max_score]}),e[20]=t.max_score,e[21]=d):d=e[21];let u;e[22]!==m||e[23]!==o||e[24]!==d?(u=s.jsxs("div",{className:"m3-card-elevated bg-gradient-to-br from-primary/5 to-secondary/5 mb-6",children:[m,o,d]}),e[22]=m,e[23]=o,e[24]=d,e[25]=u):u=e[25];let $;e[26]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("h3",{className:"font-medium text-on-surface",children:"Daftar Siswa"}),e[26]=$):$=e[26];let x;e[27]!==n.length?(x=s.jsxs("div",{className:"px-5 py-4 border-b border-border flex justify-between items-center",children:[$,s.jsxs("span",{className:"text-xs text-on-surface-variant bg-surface-variant px-2 py-1 rounded-md",children:[n.length," Siswa"]})]}),e[27]=n.length,e[28]=x):x=e[28];let f;e[29]!==t.max_score||e[30]!==t.teaching_assignment.id||e[31]!==L||e[32]!==n?(f=n.length>0?s.jsx("div",{className:"divide-y divide-border",children:n.map(a=>s.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-surface-variant/30 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[s.jsx("p",{className:"font-medium text-on-surface truncate",children:a.student.name}),s.jsxs("p",{className:"text-sm text-on-surface-variant",children:["NIS: ",a.student.nis]})]}),s.jsx("div",{className:"w-20",children:s.jsx("input",{type:"number",value:a.score??"",onChange:I=>L(a.student.id,I.target.value),min:0,max:t.max_score,placeholder:"-",className:"m3-input h-12 text-center font-bold text-lg p-0"})})]},a.student.id))}):s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("p",{className:"text-lg font-medium text-on-surface",children:"Belum ada siswa di kelas ini"}),s.jsx("p",{className:"text-on-surface-variant mt-1",children:"Tambahkan siswa dulu agar bisa menginput nilai."}),s.jsx(G,{href:`/assessments/${t.teaching_assignment.id}`,className:"m3-button-filled mt-6 inline-flex",children:"Kelola Siswa"})]}),e[29]=t.max_score,e[30]=t.teaching_assignment.id,e[31]=L,e[32]=n,e[33]=f):f=e[33];let p;e[34]!==x||e[35]!==f?(p=s.jsxs("div",{className:"m3-card-elevated p-0 overflow-hidden",children:[x,f]}),e[34]=x,e[35]=f,e[36]=p):p=e[36];const H=S?"Menyimpan...":"Simpan Nilai";let h;e[37]!==S||e[38]!==H?(h=s.jsx("div",{className:"mt-6 md:hidden",children:s.jsx("button",{type:"submit",disabled:S,className:"w-full m3-button-filled h-12",children:H})}),e[37]=S,e[38]=H,e[39]=h):h=e[39];let g;e[40]!==l||e[41]!==p||e[42]!==h?(g=s.jsxs("form",{onSubmit:l,children:[p,h]}),e[40]=l,e[41]=p,e[42]=h,e[43]=g):g=e[43];let b;e[44]!==u||e[45]!==g?(b=s.jsxs("div",{className:"m3-container py-6",children:[u,g]}),e[44]=u,e[45]=g,e[46]=b):b=e[46];let F;return e[47]!==b||e[48]!==A||e[49]!==r||e[50]!==c?(F=s.jsxs(O,{title:"Input Nilai",showBack:!0,backUrl:A,showFab:!0,fabIcon:k,onFabClick:r,children:[c,b]}),e[47]=b,e[48]=A,e[49]=r,e[50]=c,e[51]=F):F=e[51],F}function Q(v){return{student_id:v.student.id,score:v.score}}export{le as default};
