import{c as Q,a as V,j as t,r as Y,H as ee}from"./app-Ci7CDRNd.js";import{A as te}from"./mobile-layout-C3OyDd1n.js";import{C as q}from"./circle-check-big-DpjZZ5mS.js";import{C as re}from"./circle-x-YgSe9CFZ.js";import{T as ie}from"./triangle-alert-CSLCl1jH.js";import{C as le}from"./clock-DtUuGj2O.js";import{U}from"./users-vzg2hPAy.js";import{F as ae}from"./filter-BVul91Bq.js";import{I as oe}from"./app-sidebar-CPzjeIVL.js";/* empty css            */import"./index-BLUAye1L.js";import"./graduation-cap-Dz_krzqH.js";import"./x-B-c32jvu.js";import"./index-i1tW4-ja.js";import"./layout-dashboard-CjqitNLP.js";const r={primary:"#0d6e3f",primaryLight:"#15a060",primaryDark:"#0a5832",goldLight:"#e0c76e"};function ne(l){return l>=90?{bg:"rgba(13,110,63,0.12)",color:r.primary,label:"Sangat Baik"}:l>=75?{bg:"rgba(200,169,81,0.15)",color:"#9a7d2e",label:"Baik"}:l>=60?{bg:"rgba(251,146,60,0.12)",color:"#ea580c",label:"Cukup"}:{bg:"rgba(239,68,68,0.12)",color:"#dc2626",label:"Kurang"}}function Ce(l){const e=Q.c(48),{activeTerm:k,classGroups:u,studentData:s,overview:a,filters:Z}=l;let v;e[0]!==s?(v=s===void 0?[]:s,e[0]=s,e[1]=v):v=e[1];const d=v,[n,J]=V.useState(Z?.class_group_id||"");let S;e[2]!==n?(S=()=>{n&&Y.get("/reports/attendance",{class_group_id:n},{preserveState:!0})},e[2]=n,e[3]=S):S=e[3];const G=S,N=d.length>0,p=!!Z?.class_group_id;let A,C,w,z,_,I,R;e[4]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(ee,{title:"Rekap Kehadiran"}),w={padding:"20px 16px 32px",maxWidth:"1000px",margin:"0 auto",fontFamily:"'Inter', sans-serif"},z={background:`linear-gradient(135deg, ${r.primaryDark} 0%, ${r.primary} 60%, ${r.primaryLight} 100%)`,borderRadius:"24px",padding:"24px",marginBottom:"20px",position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(13,110,63,0.25)"},_=t.jsx("div",{style:{position:"absolute",top:"-40px",right:"-40px",width:"160px",height:"160px",borderRadius:"50%",background:"rgba(200,169,81,0.12)",filter:"blur(40px)"}}),I={position:"relative",zIndex:1},R=t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[t.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"12px",backgroundColor:"rgba(200,169,81,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(U,{size:20,color:r.goldLight})}),t.jsx("h1",{style:{fontSize:"20px",fontWeight:700,color:"#fff",margin:0},children:"Rekap Kehadiran"})]}),A={color:"rgba(255,255,255,0.7)",fontSize:"13px",margin:0},e[4]=A,e[5]=C,e[6]=w,e[7]=z,e[8]=_,e[9]=I,e[10]=R):(A=e[4],C=e[5],w=e[6],z=e[7],_=e[8],I=e[9],R=e[10]);const X=k?.name||"Semester",M=k?.academic_year?.name||"Tahun Ajaran";let x;e[11]!==X||e[12]!==M?(x=t.jsxs("div",{style:z,children:[_,t.jsxs("div",{style:I,children:[R,t.jsxs("p",{style:A,children:[X," â€¢ ",M]})]})]}),e[11]=X,e[12]=M,e[13]=x):x=e[13];let W,B,D,T,K;e[14]===Symbol.for("react.memo_cache_sentinel")?(W={backgroundColor:"#fff",borderRadius:"20px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 12px rgba(13,110,63,0.06)",border:"1px solid rgba(13,110,63,0.08)"},B=t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"14px"},children:[t.jsx(ae,{size:16,color:r.primary}),t.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:r.primaryDark},children:"FILTER"})]}),D={display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},T={flex:1,minWidth:"180px"},K=t.jsx("label",{style:{fontSize:"12px",fontWeight:600,color:"#888",display:"block",marginBottom:"6px"},children:"Kelas"}),e[14]=W,e[15]=B,e[16]=D,e[17]=T,e[18]=K):(W=e[14],B=e[15],D=e[16],T=e[17],K=e[18]);let L,$,P;e[19]===Symbol.for("react.memo_cache_sentinel")?(L=i=>J(i.target.value),$={width:"100%",padding:"10px 14px",borderRadius:"12px",border:"1.5px solid rgba(13,110,63,0.15)",fontSize:"14px",backgroundColor:"#fafafa",outline:"none",cursor:"pointer"},P=t.jsx("option",{value:"",children:"Pilih Kelas"}),e[19]=L,e[20]=$,e[21]=P):(L=e[19],$=e[20],P=e[21]);let c;e[22]!==u?(c=u.map(de),e[22]=u,e[23]=c):c=e[23];let g;e[24]!==n||e[25]!==c?(g=t.jsxs("div",{style:T,children:[K,t.jsxs("select",{value:n,onChange:L,style:$,children:[P,c]})]}),e[24]=n,e[25]=c,e[26]=g):g=e[26];let F,H;e[27]===Symbol.for("react.memo_cache_sentinel")?(F={padding:"10px 24px",borderRadius:"12px",background:`linear-gradient(135deg, ${r.primary}, ${r.primaryLight})`,color:"#fff",fontWeight:600,fontSize:"14px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(13,110,63,0.2)"},H=t.jsx(oe,{size:16}),e[27]=F,e[28]=H):(F=e[27],H=e[28]);let h;e[29]!==G?(h=t.jsxs("button",{onClick:G,style:F,children:[H," Tampilkan"]}),e[29]=G,e[30]=h):h=e[30];let m;e[31]!==g||e[32]!==h?(m=t.jsxs("div",{style:W,children:[B,t.jsxs("div",{style:D,children:[g,h]})]}),e[31]=g,e[32]=h,e[33]=m):m=e[33];let f;e[34]!==a?(f=a&&t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"10px"},children:[{label:"Kehadiran",value:`${a.present_pct}%`,icon:q,color:r.primary},{label:"Hadir",value:a.present,icon:q,color:r.primary},{label:"Alpha",value:a.absent,icon:re,color:"#dc2626"},{label:"Sakit",value:a.sick,icon:ie,color:"#ea580c"},{label:"Izin",value:a.permit,icon:le,color:"#2563eb"}].map(se)})}),e[34]=a,e[35]=f):f=e[35];let b;e[36]!==N||e[37]!==p||e[38]!==d?(b=p&&t.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"20px",overflow:"hidden",boxShadow:"0 2px 12px rgba(13,110,63,0.06)",border:"1px solid rgba(13,110,63,0.08)"},children:[t.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(13,110,63,0.06)",display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx(U,{size:18,color:r.primary}),t.jsxs("h2",{style:{fontWeight:600,color:r.primaryDark,margin:0,fontSize:"15px"},children:["Per Siswa (",d.length,")"]})]}),N?t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:"rgba(13,110,63,0.04)"},children:[t.jsx("th",{style:o,children:"NIS"}),t.jsx("th",{style:o,children:"NAMA SISWA"}),t.jsx("th",{style:{...o,textAlign:"center"},children:"HADIR"}),t.jsx("th",{style:{...o,textAlign:"center"},children:"ALPHA"}),t.jsx("th",{style:{...o,textAlign:"center"},children:"SAKIT"}),t.jsx("th",{style:{...o,textAlign:"center"},children:"IZIN"}),t.jsx("th",{style:{...o,textAlign:"center"},children:"% HADIR"}),t.jsx("th",{style:{...o,textAlign:"center"},children:"STATUS"})]})}),t.jsx("tbody",{children:d.map((i,O)=>{const j=ne(i.present_pct);return t.jsxs("tr",{style:{borderBottom:O<d.length-1?"1px solid rgba(0,0,0,0.04)":"none"},children:[t.jsx("td",{style:{padding:"12px 16px",color:"#666",whiteSpace:"nowrap"},children:i.nis}),t.jsx("td",{style:{padding:"12px 16px",fontWeight:500,color:r.primaryDark,whiteSpace:"nowrap"},children:i.student_name}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:r.primary},children:i.present}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:i.absent>0?"#dc2626":"#ccc"},children:i.absent}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:i.sick>0?"#ea580c":"#ccc"},children:i.sick}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:i.permit>0?"#2563eb":"#ccc"},children:i.permit}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[t.jsx("div",{style:{width:"60px",height:"6px",borderRadius:"3px",backgroundColor:"#f0f0f0",overflow:"hidden"},children:t.jsx("div",{style:{width:`${i.present_pct}%`,height:"100%",borderRadius:"3px",backgroundColor:j.color,transition:"width 0.6s ease"}})}),t.jsxs("span",{style:{fontSize:"12px",fontWeight:700,color:j.color,minWidth:"36px"},children:[i.present_pct,"%"]})]})}),t.jsx("td",{style:{padding:"12px 16px",textAlign:"center"},children:t.jsx("span",{style:{padding:"3px 10px",borderRadius:"8px",fontSize:"11px",fontWeight:600,backgroundColor:j.bg,color:j.color},children:j.label})})]},i.student_id)})})]})}):t.jsxs("div",{style:{padding:"48px 20px",textAlign:"center"},children:[t.jsx(U,{size:48,color:"#ddd",style:{margin:"0 auto 16px"}}),t.jsx("p",{style:{fontWeight:600,color:"#bbb",fontSize:"15px",margin:"0 0 4px"},children:"Belum ada data kehadiran"}),t.jsx("p",{style:{color:"#ccc",fontSize:"13px",margin:0},children:'Pilih kelas dan klik "Tampilkan"'})]})]}),e[36]=N,e[37]=p,e[38]=d,e[39]=b):b=e[39];let y;e[40]!==p?(y=!p&&t.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"20px",padding:"48px 24px",textAlign:"center",boxShadow:"0 2px 12px rgba(13,110,63,0.06)",border:"1px solid rgba(13,110,63,0.08)"},children:[t.jsx("div",{style:{width:"72px",height:"72px",borderRadius:"20px",background:"linear-gradient(135deg, rgba(13,110,63,0.08), rgba(200,169,81,0.08))",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:t.jsx(U,{size:32,color:r.primary})}),t.jsx("p",{style:{fontWeight:600,color:r.primaryDark,fontSize:"16px",margin:"0 0 8px"},children:"Pilih Kelas"}),t.jsx("p",{style:{color:"#999",fontSize:"14px",margin:0,maxWidth:"320px",marginLeft:"auto",marginRight:"auto"},children:'Pilih kelas di atas lalu klik "Tampilkan" untuk melihat rekap kehadiran siswa.'})]}),e[40]=p,e[41]=y):y=e[41];let E;return e[42]!==x||e[43]!==m||e[44]!==f||e[45]!==b||e[46]!==y?(E=t.jsxs(te,{title:"Rekap Kehadiran",showBack:!0,backUrl:"/dashboard",children:[C,t.jsxs("div",{style:w,children:[x,m,f,b,y]})]}),e[42]=x,e[43]=m,e[44]=f,e[45]=b,e[46]=y,e[47]=E):E=e[47],E}function se(l){const{label:e,value:k,icon:u,color:s}=l;return t.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"14px",boxShadow:"0 2px 12px rgba(13,110,63,0.06)",border:"1px solid rgba(13,110,63,0.08)",textAlign:"center"},children:[t.jsx(u,{size:20,color:s,style:{margin:"0 auto 8px"}}),t.jsx("p",{style:{fontSize:"20px",fontWeight:700,color:r.primaryDark,margin:0},children:k}),t.jsx("p",{style:{fontSize:"11px",color:"#888",margin:"2px 0 0"},children:e})]},e)}function de(l){return t.jsxs("option",{value:l.id,children:[l.level?`${l.level} `:"",l.name]},l.id)}const o={padding:"12px 16px",textAlign:"left",fontWeight:600,color:"#0a5832",fontSize:"12px",letterSpacing:"0.05em",whiteSpace:"nowrap"};export{Ce as default};
