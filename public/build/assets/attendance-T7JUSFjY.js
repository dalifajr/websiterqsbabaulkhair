import{c as te,j as t,H as se,L as ae,r as le}from"./app-BIvzwccv.js";import{C as X,b as Q,c as W,a as $}from"./card-CRzy6H-e.js";import{B as Z}from"./badge-Bm4co7nH.js";import{b as re,c as ne,S as ie,a as ce,d as de}from"./select-Dq_OR2bz.js";import{a as me,A as oe}from"./mobile-layout-D9Qd-TfW.js";import{b as xe}from"./academic-Baw6BGIT.js";import{C as Y}from"./clock-BlIIERme.js";import{C as pe}from"./circle-x-CFmUpgjv.js";import{C as he}from"./circle-alert-Cjb10MRa.js";import{C as fe}from"./circle-check-big-eL1moYQ7.js";/* empty css            */import"./index-DjE0M2Dt.js";import"./app-sidebar-pgH88vyX.js";import"./x-DMUOfCw7.js";import"./graduation-cap-CSmE7P7H.js";import"./index-DzmB0TSU.js";import"./layout-dashboard-yP3e5MZV.js";import"./target-DhyfOdF9.js";import"./index-B3kH-YL2.js";import"./chevron-down-Dm6nZdOn.js";import"./check-C21MIoSv.js";const ue={present:t.jsx(fe,{className:"h-4 w-4 text-green-600"}),sick:t.jsx(he,{className:"h-4 w-4 text-yellow-600"}),permit:t.jsx(Y,{className:"h-4 w-4 text-blue-600"}),absent:t.jsx(pe,{className:"h-4 w-4 text-red-600"}),unmarked:t.jsx(Y,{className:"h-4 w-4 text-gray-400"})},ge={present:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",sick:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",permit:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",absent:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",unmarked:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"};function Oe(a){const e=te.c(70),{student:q,attendanceRecords:i,summaryBySubject:c,terms:F,filters:G}=a,ee=Ne;let n,B;e[0]!==c?(n=Object.keys(c),B=n.reduce((l,d)=>{const r=c[d];return{total:l.total+r.total,present:l.present+r.present,sick:l.sick+r.sick,permit:l.permit+r.permit,absent:l.absent+r.absent}},{total:0,present:0,sick:0,permit:0,absent:0}),e[0]=c,e[1]=n,e[2]=B):(n=e[1],B=e[2]);const s=B;let E;e[3]!==s.present||e[4]!==s.total?(E=s.total>0?Math.round(s.present/s.total*100):0,e[3]=s.present,e[4]=s.total,e[5]=E):E=e[5];const J=E;let K;e[6]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(se,{title:"Kehadiran Siswa"}),e[6]=K):K=e[6];let L;e[7]===Symbol.for("react.memo_cache_sentinel")?(L=route("parent.dashboard"),e[7]=L):L=e[7];let P,R;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(ae,{href:L,className:"rounded-full p-2 hover:bg-muted",children:t.jsx(me,{className:"h-5 w-5"})}),R=t.jsx("h1",{className:"text-xl font-bold",children:"Kehadiran"}),e[8]=P,e[9]=R):(P=e[8],R=e[9]);let m;e[10]!==q.name?(m=t.jsxs("div",{className:"flex items-center gap-3",children:[P,t.jsxs("div",{children:[R,t.jsx("p",{className:"text-sm text-muted-foreground",children:q.name})]})]}),e[10]=q.name,e[11]=m):m=e[11];let o;e[12]!==G.term_id?(o=G.term_id?.toString()||"",e[12]=G.term_id,e[13]=o):o=e[13];let D;e[14]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(re,{children:t.jsx(ne,{placeholder:"Pilih Semester"})}),e[14]=D):D=e[14];let x;e[15]!==F?(x=F.map(je),e[15]=F,e[16]=x):x=e[16];let p;e[17]!==x?(p=t.jsx(ie,{children:x}),e[17]=x,e[18]=p):p=e[18];let h;e[19]!==p||e[20]!==o?(h=t.jsxs(ce,{value:o,onValueChange:ee,children:[D,p]}),e[19]=p,e[20]=o,e[21]=h):h=e[21];let H;e[22]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(Q,{className:"pb-3",children:t.jsx(W,{className:"text-base",children:"Ringkasan Kehadiran"})}),e[22]=H):H=e[22];let f;e[23]!==J?(f=t.jsxs("p",{className:"text-4xl font-bold text-primary",children:[J,"%"]}),e[23]=J,e[24]=f):f=e[24];let I;e[25]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Tingkat Kehadiran"}),e[25]=I):I=e[25];let u;e[26]!==f?(u=t.jsxs("div",{className:"mb-4 text-center",children:[f,I]}),e[26]=f,e[27]=u):u=e[27];let g;e[28]!==s.present?(g=t.jsx("p",{className:"text-lg font-bold text-green-600",children:s.present}),e[28]=s.present,e[29]=g):g=e[29];let M;e[30]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Hadir"}),e[30]=M):M=e[30];let b;e[31]!==g?(b=t.jsxs("div",{className:"rounded-lg bg-green-100 p-2 dark:bg-green-900/30",children:[g,M]}),e[31]=g,e[32]=b):b=e[32];let j;e[33]!==s.sick?(j=t.jsx("p",{className:"text-lg font-bold text-yellow-600",children:s.sick}),e[33]=s.sick,e[34]=j):j=e[34];let V;e[35]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Sakit"}),e[35]=V):V=e[35];let N;e[36]!==j?(N=t.jsxs("div",{className:"rounded-lg bg-yellow-100 p-2 dark:bg-yellow-900/30",children:[j,V]}),e[36]=j,e[37]=N):N=e[37];let y;e[38]!==s.permit?(y=t.jsx("p",{className:"text-lg font-bold text-blue-600",children:s.permit}),e[38]=s.permit,e[39]=y):y=e[39];let z;e[40]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Izin"}),e[40]=z):z=e[40];let _;e[41]!==y?(_=t.jsxs("div",{className:"rounded-lg bg-blue-100 p-2 dark:bg-blue-900/30",children:[y,z]}),e[41]=y,e[42]=_):_=e[42];let k;e[43]!==s.absent?(k=t.jsx("p",{className:"text-lg font-bold text-red-600",children:s.absent}),e[43]=s.absent,e[44]=k):k=e[44];let O;e[45]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Alfa"}),e[45]=O):O=e[45];let S;e[46]!==k?(S=t.jsxs("div",{className:"rounded-lg bg-red-100 p-2 dark:bg-red-900/30",children:[k,O]}),e[46]=k,e[47]=S):S=e[47];let w;e[48]!==b||e[49]!==N||e[50]!==_||e[51]!==S?(w=t.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[b,N,_,S]}),e[48]=b,e[49]=N,e[50]=_,e[51]=S,e[52]=w):w=e[52];let v;e[53]!==u||e[54]!==w?(v=t.jsxs(X,{children:[H,t.jsxs($,{children:[u,w]})]}),e[53]=u,e[54]=w,e[55]=v):v=e[55];let C;e[56]!==n||e[57]!==c?(C=n.length>0&&t.jsxs(X,{children:[t.jsx(Q,{className:"pb-3",children:t.jsx(W,{className:"text-base",children:"Per Mata Pelajaran"})}),t.jsx($,{className:"space-y-2",children:n.map(l=>{const d=c[l],r=d.total>0?Math.round(d.present/d.total*100):0;return t.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-muted/50 p-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:l}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.present,"/",d.total," pertemuan"]})]}),t.jsxs(Z,{variant:r>=80?"default":r>=60?"secondary":"destructive",children:[r,"%"]})]},l)})})]}),e[56]=n,e[57]=c,e[58]=C):C=e[58];let A;e[59]!==i?(A=i.length>0&&t.jsxs(X,{children:[t.jsx(Q,{className:"pb-3",children:t.jsx(W,{className:"text-base",children:"Riwayat Kehadiran"})}),t.jsx($,{className:"space-y-2",children:i.slice(0,20).map(be)})]}),e[59]=i,e[60]=A):A=e[60];let T;e[61]!==i.length?(T=i.length===0&&t.jsx(X,{children:t.jsx($,{className:"py-8 text-center",children:t.jsx("p",{className:"text-muted-foreground",children:"Belum ada data kehadiran di semester ini"})})}),e[61]=i.length,e[62]=T):T=e[62];let U;return e[63]!==h||e[64]!==v||e[65]!==C||e[66]!==A||e[67]!==T||e[68]!==m?(U=t.jsxs(oe,{children:[K,t.jsxs("div",{className:"space-y-4 p-4",children:[m,h,v,C,A,T]})]}),e[63]=h,e[64]=v,e[65]=C,e[66]=A,e[67]=T,e[68]=m,e[69]=U):U=e[69],U}function be(a){return t.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-muted/50 p-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[ue[a.status],t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:a.attendance_session?.teaching_assignment?.subject?.name}),t.jsx("p",{className:"text-xs text-muted-foreground",children:a.attendance_session?.meeting_date&&new Date(a.attendance_session.meeting_date).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]})]}),t.jsx(Z,{className:ge[a.status],children:xe[a.status]})]},a.id)}function je(a){return t.jsxs(de,{value:a.id.toString(),children:[a.name," - ",a.academic_year?.name]},a.id)}function Ne(a){le.get(route("parent.attendance"),{term_id:a},{preserveState:!0})}export{Oe as default};
