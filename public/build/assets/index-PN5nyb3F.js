import{c as K,a as T,u as G,j as t,r as U,H as J}from"./app-BIvzwccv.js";import{A as O}from"./mobile-layout-D9Qd-TfW.js";import{T as Q}from"./triangle-alert-BgQQGGxr.js";import{D as V}from"./download-Cg94IWmt.js";import{T as X}from"./trash-2-CE1Rxp1J.js";import{S as Y}from"./shield-DfPv4jl4.js";import{D as Z}from"./app-sidebar-pgH88vyX.js";import{P as ee}from"./plus-B-dUQj23.js";import{U as te}from"./upload-_JgnDtTF.js";import{c as re}from"./graduation-cap-CSmE7P7H.js";/* empty css            */import"./index-DjE0M2Dt.js";import"./x-DMUOfCw7.js";import"./index-DzmB0TSU.js";import"./layout-dashboard-yP3e5MZV.js";import"./target-DhyfOdF9.js";const oe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],ie=re("HardDrive",oe),o={primary:"#0d6e3f",primaryLight:"#15a060",primaryDark:"#0a5832",gold:"#c8a951",goldLight:"#e0c76e"};function Se(h){const e=K.c(44),{backups:a}=h,[l,E]=T.useState(!1),[s,M]=T.useState(!1),N=T.useRef(null);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b={backup_file:null},e[0]=b):b=e[0];const r=G(b);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{M(!0),U.post("/admin/backup/create",{},{onFinish:()=>M(!1)})},e[1]=y):y=e[1];const P=y,q=ae;let k;e[2]!==r?(k=i=>{i.preventDefault(),r.data.backup_file&&confirm("⚠️ PERINGATAN: Restore akan mengganti semua data saat ini. Lanjutkan?")&&r.post("/admin/backup/restore",{onFinish:()=>{E(!1),r.reset()},forceFormData:!0})},e[2]=r,e[3]=k):k=e[3];const L=k;let j,S,R,v;e[4]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(J,{title:"Backup & Restore"}),S={padding:"20px 16px 32px",maxWidth:"800px",margin:"0 auto",fontFamily:"'Inter', sans-serif"},R=t.jsxs("div",{style:{background:`linear-gradient(135deg, ${o.primaryDark} 0%, ${o.primary} 60%, ${o.primaryLight} 100%)`,borderRadius:"24px",padding:"24px",marginBottom:"20px",position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(13,110,63,0.25)"},children:[t.jsx("div",{style:{position:"absolute",top:"-40px",right:"-40px",width:"160px",height:"160px",borderRadius:"50%",background:"rgba(200,169,81,0.12)",filter:"blur(40px)"}}),t.jsxs("div",{style:{position:"relative",zIndex:1},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[t.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"12px",backgroundColor:"rgba(200,169,81,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Z,{size:20,color:o.goldLight})}),t.jsx("h1",{style:{fontSize:"20px",fontWeight:700,color:"#fff",margin:0},children:"Backup & Restore"})]}),t.jsx("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px",margin:0},children:"Kelola backup database untuk keamanan data"})]})]}),v={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"20px"},e[4]=j,e[5]=S,e[6]=R,e[7]=v):(j=e[4],S=e[5],R=e[6],v=e[7]);const W=s?"not-allowed":"pointer",A=s?.7:1;let n;e[8]!==W||e[9]!==A?(n={padding:"16px",borderRadius:"16px",background:`linear-gradient(135deg, ${o.primary}, ${o.primaryLight})`,color:"#fff",fontWeight:600,fontSize:"13px",border:"none",cursor:W,opacity:A,display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(13,110,63,0.2)"},e[8]=W,e[9]=A,e[10]=n):n=e[10];let z;e[11]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(ee,{size:20}),e[11]=z):z=e[11];const F=s?"Membuat...":"Buat Backup";let d;e[12]!==s||e[13]!==n||e[14]!==F?(d=t.jsxs("button",{onClick:P,disabled:s,style:n,children:[z,F]}),e[12]=s,e[13]=n,e[14]=F,e[15]=d):d=e[15];let p;e[16]!==l?(p=()=>E(!l),e[16]=l,e[17]=p):p=e[17];let _,w;e[18]===Symbol.for("react.memo_cache_sentinel")?(_={padding:"16px",borderRadius:"16px",background:`linear-gradient(135deg, ${o.gold}, ${o.goldLight})`,color:o.primaryDark,fontWeight:600,fontSize:"13px",border:"none",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(200,169,81,0.2)"},w=t.jsx(te,{size:20}),e[18]=_,e[19]=w):(_=e[18],w=e[19]);let c;e[20]!==p?(c=t.jsxs("button",{onClick:p,style:_,children:[w,"Restore"]}),e[20]=p,e[21]=c):c=e[21];let x;e[22]!==d||e[23]!==c?(x=t.jsxs("div",{style:v,children:[d,c]}),e[22]=d,e[23]=c,e[24]=x):x=e[24];let m;e[25]!==L||e[26]!==r||e[27]!==l?(m=l&&t.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"20px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 12px rgba(13,110,63,0.06)",border:"2px solid rgba(251,146,60,0.3)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[t.jsx(Q,{size:16,color:"#ea580c"}),t.jsx("span",{style:{fontSize:"13px",fontWeight:600,color:"#ea580c"},children:"Restore Database"})]}),t.jsxs("p",{style:{fontSize:"12px",color:"#888",marginBottom:"16px"},children:["Upload file .sql untuk memulihkan database. ",t.jsx("strong",{style:{color:"#dc2626"},children:"Data saat ini akan ditimpa!"})]}),t.jsxs("form",{onSubmit:L,children:[t.jsx("input",{ref:N,type:"file",accept:".sql",onChange:i=>{const H=i.target.files?.[0]||null;r.setData("backup_file",H)},style:{width:"100%",padding:"10px 14px",borderRadius:"12px",border:"1.5px solid rgba(13,110,63,0.15)",fontSize:"14px",backgroundColor:"#fafafa",marginBottom:"12px"}}),r.errors.backup_file&&t.jsx("p",{style:{fontSize:"12px",color:"#dc2626",marginBottom:"12px"},children:r.errors.backup_file}),t.jsx("button",{type:"submit",disabled:!r.data.backup_file||r.processing,style:{width:"100%",padding:"10px",borderRadius:"12px",backgroundColor:"#ea580c",color:"#fff",fontWeight:600,fontSize:"14px",border:"none",cursor:r.data.backup_file?"pointer":"not-allowed",opacity:r.data.backup_file?1:.5},children:r.processing?"Memulihkan...":"Mulai Restore"})]})]}),e[25]=L,e[26]=r,e[27]=l,e[28]=m):m=e[28];let B,D,C,I;e[29]===Symbol.for("react.memo_cache_sentinel")?(B={backgroundColor:"#fff",borderRadius:"20px",overflow:"hidden",boxShadow:"0 2px 12px rgba(13,110,63,0.06)",border:"1px solid rgba(13,110,63,0.08)"},D={padding:"16px 20px",borderBottom:"1px solid rgba(13,110,63,0.06)",display:"flex",alignItems:"center",gap:"10px"},C=t.jsx(ie,{size:18,color:o.primary}),I={fontWeight:600,color:o.primaryDark,margin:0,fontSize:"15px"},e[29]=B,e[30]=D,e[31]=C,e[32]=I):(B=e[29],D=e[30],C=e[31],I=e[32]);let f;e[33]!==a.length?(f=t.jsxs("div",{style:D,children:[C,t.jsxs("h2",{style:I,children:["Daftar Backup (",a.length,")"]})]}),e[33]=a.length,e[34]=f):f=e[34];let g;e[35]!==a?(g=a.length>0?t.jsx("div",{children:a.map((i,H)=>t.jsxs("div",{style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:H<a.length-1?"1px solid rgba(0,0,0,0.04)":"none"},children:[t.jsxs("div",{children:[t.jsx("p",{style:{fontWeight:600,color:o.primaryDark,margin:0,fontSize:"13px"},children:i.name}),t.jsxs("p",{style:{fontSize:"12px",color:"#999",margin:"2px 0 0"},children:[i.size," • ",i.date]})]}),t.jsxs("div",{style:{display:"flex",gap:"6px"},children:[t.jsx("a",{href:`/admin/backup/download/${i.name}`,style:{width:"34px",height:"34px",borderRadius:"10px",backgroundColor:"rgba(13,110,63,0.08)",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},children:t.jsx(V,{size:14,color:o.primary})}),t.jsx("button",{onClick:()=>q(i.name),style:{width:"34px",height:"34px",borderRadius:"10px",backgroundColor:"rgba(239,68,68,0.08)",display:"flex",alignItems:"center",justifyContent:"center",border:"none",cursor:"pointer"},children:t.jsx(X,{size:14,color:"#dc2626"})})]})]},i.name))}):t.jsxs("div",{style:{padding:"48px 20px",textAlign:"center"},children:[t.jsx(Y,{size:48,color:"#ddd",style:{margin:"0 auto 16px"}}),t.jsx("p",{style:{fontWeight:600,color:"#bbb",fontSize:"15px",margin:"0 0 4px"},children:"Belum ada backup"}),t.jsx("p",{style:{color:"#ccc",fontSize:"13px",margin:0},children:'Klik "Buat Backup" untuk membuat backup pertama.'})]}),e[35]=a,e[36]=g):g=e[36];let u;e[37]!==f||e[38]!==g?(u=t.jsxs("div",{style:B,children:[f,g]}),e[37]=f,e[38]=g,e[39]=u):u=e[39];let $;return e[40]!==x||e[41]!==m||e[42]!==u?($=t.jsxs(O,{title:"Backup & Restore",showBack:!0,backUrl:"/dashboard",children:[j,t.jsxs("div",{style:S,children:[R,x,m,u]})]}),e[40]=x,e[41]=m,e[42]=u,e[43]=$):$=e[43],$}function ae(h){confirm(`Hapus backup "${h}"?`)&&U.delete(`/admin/backup/${h}`)}export{Se as default};
