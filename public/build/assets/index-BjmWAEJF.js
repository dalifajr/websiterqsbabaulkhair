import{c as pe,j as t,L as se,r as fe,H as je}from"./app-sW6fCb4y.js";import{A as _e}from"./mobile-layout-DGQtAksw.js";import{B as le}from"./badge-DwJitjg7.js";import{b as re,c as ce,d as Z,S as ne,a as me}from"./select-CqnfBJTe.js";import{P as ge}from"./academic-Baw6BGIT.js";import{U as Ne}from"./users-bKj1HJXE.js";import{v as ae}from"./app-sidebar-CI1fYkiJ.js";import{L as oe}from"./lock-open-CGOF2RFG.js";import{L as de}from"./lock-CFJZM0yI.js";import{E as ve}from"./eye-CysD33rX.js";import{P as be}from"./printer-BpcKuBvV.js";import{P as ie}from"./plus-DtaPLmsK.js";/* empty css            */import"./index-DL5FI1V4.js";import"./graduation-cap-ClVqnEvr.js";import"./x-BJgijQIp.js";import"./index-CHtKh_iC.js";import"./chevron-down-DuHX-bje.js";import"./check--_lIXu0W.js";import"./index-DHgL46HU.js";import"./layout-dashboard-DKQQ2k74.js";function We(l){const e=pe.c(86),{reportCards:a,classGroups:C,terms:ee,filters:i}=l;let G;e[0]!==i?(G=(s,Y)=>{fe.get("/admin/report-cards",{...i,[s]:Y==="all"?null:Y},{preserveState:!0})},e[0]=i,e[1]=G):G=e[1];const c=G,xe=Pe;let n;e[2]!==a?(n=a||[],e[2]=a,e[3]=n):n=e[3];const he=n.length;let m;e[4]!==a?(m=a||[],e[4]=a,e[5]=m):m=e[5];let o;e[6]!==m?(o=m.filter(we),e[6]=m,e[7]=o):o=e[7];const ue=o.length;let d;e[8]!==a?(d=a||[],e[8]=a,e[9]=d):d=e[9];let f;e[10]!==d?(f=d.filter(ke),e[10]=d,e[11]=f):f=e[11];let I;e[12]!==n.length||e[13]!==o.length||e[14]!==f.length?(I={total:he,locked:ue,draft:f.length},e[12]=n.length,e[13]=o.length,e[14]=f.length,e[15]=I):I=e[15];const r=I,te=!!i.class_group_id;let K;e[16]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(ie,{className:"w-6 h-6"}),e[16]=K):K=e[16];let O;e[17]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(je,{title:"Rapor Siswa"}),e[17]=O):O=e[17];let U;e[18]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-primary/10 flex items-center justify-center",children:t.jsx(ae,{className:"w-5 h-5 text-primary"})}),e[18]=U):U=e[18];let x;e[19]!==r.total?(x=t.jsx("p",{className:"text-2xl font-semibold text-on-surface",children:r.total}),e[19]=r.total,e[20]=x):x=e[20];let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("p",{className:"text-xs text-on-surface-variant mt-1",children:"Total"}),e[21]=A):A=e[21];let h;e[22]!==x?(h=t.jsxs("div",{className:"m3-card-elevated text-center",children:[U,x,A]}),e[22]=x,e[23]=h):h=e[23];let D;e[24]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-green-500/10 flex items-center justify-center",children:t.jsx(de,{className:"w-5 h-5 text-green-500"})}),e[24]=D):D=e[24];let u;e[25]!==r.locked?(u=t.jsx("p",{className:"text-2xl font-semibold text-on-surface",children:r.locked}),e[25]=r.locked,e[26]=u):u=e[26];let H;e[27]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("p",{className:"text-xs text-on-surface-variant mt-1",children:"Final"}),e[27]=H):H=e[27];let p;e[28]!==u?(p=t.jsxs("div",{className:"m3-card-elevated text-center",children:[D,u,H]}),e[28]=u,e[29]=p):p=e[29];let V;e[30]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-xl bg-yellow-500/10 flex items-center justify-center",children:t.jsx(oe,{className:"w-5 h-5 text-yellow-500"})}),e[30]=V):V=e[30];let j;e[31]!==r.draft?(j=t.jsx("p",{className:"text-2xl font-semibold text-on-surface",children:r.draft}),e[31]=r.draft,e[32]=j):j=e[32];let M;e[33]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("p",{className:"text-xs text-on-surface-variant mt-1",children:"Draft"}),e[33]=M):M=e[33];let _;e[34]!==j?(_=t.jsxs("div",{className:"m3-card-elevated text-center",children:[V,j,M]}),e[34]=j,e[35]=_):_=e[35];let g;e[36]!==h||e[37]!==p||e[38]!==_?(g=t.jsxs("div",{className:"grid grid-cols-3 gap-3 m3-stagger",children:[h,p,_]}),e[36]=h,e[37]=p,e[38]=_,e[39]=g):g=e[39];let N;e[40]!==i.term_id?(N=i.term_id?.toString()||"all",e[40]=i.term_id,e[41]=N):N=e[41];let v;e[42]!==c?(v=s=>c("term_id",s),e[42]=c,e[43]=v):v=e[43];let q;e[44]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(re,{className:"flex-1",children:t.jsx(ce,{placeholder:"Pilih Semester"})}),e[44]=q):q=e[44];let z;e[45]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(Z,{value:"all",children:"Semua Semester"}),e[45]=z):z=e[45];let b;e[46]!==ee?(b=ee||[],e[46]=ee,e[47]=b):b=e[47];let y;e[48]!==b?(y=b.map(Se),e[48]=b,e[49]=y):y=e[49];let S;e[50]!==y?(S=t.jsxs(ne,{children:[z,y]}),e[50]=y,e[51]=S):S=e[51];let k;e[52]!==N||e[53]!==v||e[54]!==S?(k=t.jsxs(me,{value:N,onValueChange:v,children:[q,S]}),e[52]=N,e[53]=v,e[54]=S,e[55]=k):k=e[55];let w;e[56]!==i.class_group_id?(w=i.class_group_id?.toString()||"all",e[56]=i.class_group_id,e[57]=w):w=e[57];let P;e[58]!==c?(P=s=>c("class_group_id",s),e[58]=c,e[59]=P):P=e[59];let J;e[60]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(re,{className:"flex-1",children:t.jsx(ce,{placeholder:"Pilih Kelas"})}),e[60]=J):J=e[60];let Q;e[61]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(Z,{value:"all",children:"Pilih Kelas"}),e[61]=Q):Q=e[61];let R;e[62]!==C?(R=C||[],e[62]=C,e[63]=R):R=e[63];let L;e[64]!==R?(L=R.map(ye),e[64]=R,e[65]=L):L=e[65];let T;e[66]!==L?(T=t.jsxs(ne,{children:[Q,L]}),e[66]=L,e[67]=T):T=e[67];let B;e[68]!==w||e[69]!==P||e[70]!==T?(B=t.jsxs(me,{value:w,onValueChange:P,children:[J,T]}),e[68]=w,e[69]=P,e[70]=T,e[71]=B):B=e[71];let E;e[72]!==k||e[73]!==B?(E=t.jsxs("div",{className:"flex gap-2",children:[k,B]}),e[72]=k,e[73]=B,e[74]=E):E=e[74];let W;e[75]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"md:hidden",children:t.jsxs(se,{href:"/admin/report-cards/create",className:"m3-button-filled w-full",children:[t.jsx(ie,{className:"w-5 h-5"}),"Generate Rapor"]})}),e[75]=W):W=e[75];let F;e[76]!==i.class_group_id||e[77]!==a?(F=t.jsx("div",{className:"m3-card-elevated p-0 overflow-hidden",children:i.class_group_id?(a||[]).length>0?t.jsx("div",{className:"divide-y divide-border",children:a.map((s,Y)=>t.jsxs("div",{className:"m3-list-item animate-m3-fade",style:{animationDelay:`${Y*50}ms`},children:[t.jsx("div",{className:"w-11 h-11 rounded-xl bg-primary/10 flex items-center justify-center",children:t.jsx(ae,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-on-surface truncate",children:s.class_enrollment?.student?.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-on-surface-variant",children:[t.jsx(le,{variant:"outline",children:s.class_enrollment?.class_group?.name}),t.jsx("span",{children:s.term?.name})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(le,{variant:s.is_locked?"default":"secondary",children:s.is_locked?"Final":"Draft"}),s.promotion_status&&t.jsx(le,{variant:"outline",children:ge[s.promotion_status]}),s.class_rank&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Rank #",s.class_rank]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>xe(s.id),className:"p-2 rounded-full hover:bg-muted transition-colors",title:s.is_locked?"Buka Kunci":"Kunci",children:s.is_locked?t.jsx(oe,{className:"w-4 h-4 text-yellow-500"}):t.jsx(de,{className:"w-4 h-4 text-green-500"})}),t.jsx(se,{href:`/admin/report-cards/${s.id}`,className:"p-2 rounded-full hover:bg-muted transition-colors",children:t.jsx(ve,{className:"w-4 h-4 text-primary"})}),s.is_locked&&t.jsx("a",{href:`/admin/report-cards/${s.id}/print`,target:"_blank",className:"p-2 rounded-full hover:bg-muted transition-colors",children:t.jsx(be,{className:"w-4 h-4 text-muted-foreground"})})]})]},s.id))}):t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(ae,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),t.jsx("p",{className:"text-on-surface-variant",children:"Belum ada rapor"}),t.jsxs(se,{href:"/admin/report-cards/create",className:"m3-button-tonal mt-4",children:[t.jsx(ie,{className:"w-4 h-4"}),"Generate Rapor Pertama"]})]}):t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Ne,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),t.jsx("p",{className:"text-on-surface-variant",children:"Pilih kelas untuk melihat rapor"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Gunakan filter di atas untuk memilih kelas"})]})}),e[76]=i.class_group_id,e[77]=a,e[78]=F):F=e[78];let $;e[79]!==g||e[80]!==E||e[81]!==F?($=t.jsxs("div",{className:"m3-container py-6 space-y-6",children:[g,E,W,F]}),e[79]=g,e[80]=E,e[81]=F,e[82]=$):$=e[82];let X;return e[83]!==te||e[84]!==$?(X=t.jsxs(_e,{title:"Rapor Siswa",showBack:!0,backUrl:"/dashboard",showFab:te,fabIcon:K,fabHref:"/admin/report-cards/generate",children:[O,$]}),e[83]=te,e[84]=$,e[85]=X):X=e[85],X}function ye(l){return t.jsx(Z,{value:l.id.toString(),children:l.name},l.id)}function Se(l){return t.jsxs(Z,{value:l.id.toString(),children:[l.name," - ",l.academic_year?.name]},l.id)}function ke(l){return!l.is_locked}function we(l){return l.is_locked}function Pe(l){fe.post(`/admin/report-cards/${l}/toggle-lock`)}export{We as default};
