import{c as Be,a as je,j as t,L as Te,r as Le,H as Re}from"./app-LrsKmx93.js";import{A as Fe}from"./mobile-layout-X8LYD6LL.js";import{b as Ie,c as $e,S as Pe,d as T,a as Ue}from"./select-CKnaOWM9.js";import{c as Ee,G as Je}from"./graduation-cap--arkKicv.js";import{S as Ke}from"./search-C43SPJsb.js";import{P as Me}from"./printer-BsCrQv95.js";import{D as ze}from"./download-Cfx20SCM.js";import{A as We}from"./layout-dashboard-DVszlXo4.js";import{C as Ye}from"./chevron-right-DEg5f6cJ.js";/* empty css            */import"./app-sidebar-BJ8KpaQ-.js";import"./index-p0syaNOC.js";import"./x-Db2KilOX.js";import"./index-DFJIUhka.js";import"./users-DpbnXvSk.js";import"./index-MyzOAZUl.js";import"./chevron-down-BtslHCse.js";import"./check-BK6fB0Ik.js";const Oe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Qe=Ee("ArrowUpDown",Oe);const Xe=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Ze=Ee("School",Xe);function vt(i){const e=Be.c(120),{students:c,classGroups:Ne,activeTerm:Ve,filters:m,printMode:E,printStudents:ge,letterhead:o,meta:d}=i;let M;e[0]!==m?(M=m&&typeof m=="object"&&!Array.isArray(m)?m:{},e[0]=m,e[1]=M):M=e[1];const ve=M,[s,Ge]=je.useState(ve.search||""),[r,He]=je.useState(ve.sort||"name"),[l,qe]=je.useState(ve.direction||"asc");let V;e[2]!==l||e[3]!==s||e[4]!==r?(V=a=>{a.preventDefault(),Le.get("/reports/students",{search:s,sort:r,direction:l},{preserveState:!0})},e[2]=l,e[3]=s,e[4]=r,e[5]=V):V=e[5];const ye=V;let G;e[6]!==s?(G=(a,n)=>{He(a),qe(n),Le.get("/reports/students",{search:s,sort:a,direction:n},{preserveState:!0})},e[6]=s,e[7]=G):G=e[7];const x=G;let H;e[8]!==l||e[9]!==s||e[10]!==r?(H=()=>{const a=new URLSearchParams;s&&a.set("search",s),r&&a.set("sort",r),l&&a.set("direction",l),window.location.href=`/reports/students/export?${a.toString()}`},e[8]=l,e[9]=s,e[10]=r,e[11]=H):H=e[11];const we=H;let q;e[12]!==l||e[13]!==s||e[14]!==r?(q=()=>{const a=new URLSearchParams;a.set("print","1"),s&&a.set("search",s),r&&a.set("sort",r),l&&a.set("direction",l),window.open(`/reports/students?${a.toString()}`,"_blank")},e[12]=l,e[13]=s,e[14]=r,e[15]=q):q=e[15];const Se=q;let B,F;if(e[16]!==E?(B=()=>{if(!E)return;const a=window.setTimeout(at,250);return()=>window.clearTimeout(a)},F=[E],e[16]=E,e[17]=B,e[18]=F):(B=e[17],F=e[18]),je.useEffect(B,F),E){const a=!!o?.enabled,n=o?.line1||o?.schoolName||"",re=o?.line2||"",le=o?.line3||"";let ie;e[19]!==d?(ie=d?.date?new Date(d.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):new Date().toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),e[19]=d,e[20]=ie):ie=e[20];const ke=ie;let ce;e[21]!==ge?(ce=ge||[],e[21]=ge,e[22]=ce):ce=e[22];const ne=ce;let oe,de;e[23]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Re,{title:"Print Nilai Siswa"}),de=t.jsx("style",{children:`
                    @page { size: A4; margin: 8mm; }
                    html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: #fff !important; color: #000 !important; }
                `}),e[23]=oe,e[24]=de):(oe=e[23],de=e[24]);let C;e[25]!==o||e[26]!==a||e[27]!==n||e[28]!==re||e[29]!==le?(C=a&&t.jsxs("div",{className:"flex gap-3 items-start pb-2 mb-2 border-b border-black",children:[o?.logoUrl&&t.jsx("img",{src:o.logoUrl,alt:"Logo",className:"w-12 h-12 object-contain"}),t.jsxs("div",{className:"flex-1",children:[n&&t.jsx("div",{className:"text-sm font-bold leading-5",children:n}),re&&t.jsx("div",{className:"text-[11px]",children:re}),le&&t.jsx("div",{className:"text-[11px]",children:le})]})]}),e[25]=o,e[26]=a,e[27]=n,e[28]=re,e[29]=le,e[30]=C):C=e[30];let me;e[31]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("div",{className:"text-sm font-bold",children:"REKAP NILAI SISWA"}),e[31]=me):me=e[31];let D;e[32]!==ke?(D=t.jsxs("div",{className:"text-center mb-2",children:[me,t.jsxs("div",{className:"text-[11px]",children:["Tanggal: ",ke]})]}),e[32]=ke,e[33]=D):D=e[33];let xe;e[34]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("div",{className:"w-24",children:"Semester"}),e[34]=xe):xe=e[34];const Ae=d?.term||"-";let L;e[35]!==Ae?(L=t.jsxs("div",{className:"flex gap-2",children:[xe,t.jsxs("div",{children:[": ",Ae]})]}),e[35]=Ae,e[36]=L):L=e[36];let he;e[37]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("div",{className:"w-24",children:"Tahun Ajaran"}),e[37]=he):he=e[37];const Ce=d?.academicYear||"-";let R;e[38]!==Ce?(R=t.jsxs("div",{className:"flex gap-2",children:[he,t.jsxs("div",{children:[": ",Ce]})]}),e[38]=Ce,e[39]=R):R=e[39];let fe;e[40]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("div",{className:"w-24",children:"Guru/Petugas"}),e[40]=fe):fe=e[40];const De=d?.teacher||"-";let I;e[41]!==De?(I=t.jsxs("div",{className:"flex gap-2",children:[fe,t.jsxs("div",{children:[": ",De]})]}),e[41]=De,e[42]=I):I=e[42];let pe;e[43]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("div",{}),e[43]=pe):pe=e[43];let $;e[44]!==L||e[45]!==R||e[46]!==I?($=t.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 mb-2",children:[L,R,I,pe]}),e[44]=L,e[45]=R,e[46]=I,e[47]=$):$=e[47];let ue;e[48]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-100",children:[t.jsx("th",{className:"border border-black px-2 py-1 text-center w-10",children:"No"}),t.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"NIS"}),t.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"Nama"}),t.jsx("th",{className:"border border-black px-2 py-1 text-center w-20",children:"Rata-rata"}),t.jsx("th",{className:"border border-black px-2 py-1 text-center w-24",children:"Jml. Nilai"})]})}),e[48]=ue):ue=e[48];let P;e[49]!==ne?(P=ne.length>0?ne.map(tt):t.jsx("tr",{children:t.jsx("td",{className:"border border-black px-2 py-2",colSpan:5,children:"Tidak ada data."})}),e[49]=ne,e[50]=P):P=e[50];let U;e[51]!==P?(U=t.jsxs("table",{className:"w-full border border-black border-collapse",children:[ue,t.jsx("tbody",{children:P})]}),e[51]=P,e[52]=U):U=e[52];let be;return e[53]!==C||e[54]!==D||e[55]!==$||e[56]!==U?(be=t.jsxs(t.Fragment,{children:[oe,de,t.jsxs("div",{className:"p-4 print:p-0 text-[11px] leading-4 text-black bg-white",children:[C,D,$,U]})]}),e[53]=C,e[54]=D,e[55]=$,e[56]=U,e[57]=be):be=e[57],be}let J;e[58]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(Re,{title:"Rapor Siswa"}),e[58]=J):J=e[58];let K;e[59]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-surface-variant flex items-center justify-center",children:t.jsx(Ze,{className:"w-6 h-6 text-on-surface-variant"})}),e[59]=K):K=e[59];const _e=Ve?.name||"Belum ada semester aktif";let h;e[60]!==_e?(h=t.jsx("p",{className:"font-semibold text-lg text-on-surface",children:_e}),e[60]=_e,e[61]=h):h=e[61];let f;e[62]!==Ne.length||e[63]!==c.data.length?(f=t.jsxs("p",{className:"text-sm text-on-surface-variant",children:[Ne.length," Kelas • ",c.data.length," Siswa"]}),e[62]=Ne.length,e[63]=c.data.length,e[64]=f):f=e[64];let p;e[65]!==h||e[66]!==f?(p=t.jsx("div",{className:"m3-card-elevated bg-gradient-to-br from-tertiary/5 to-primary/5",children:t.jsxs("div",{className:"flex items-center gap-4",children:[K,t.jsxs("div",{children:[h,f]})]})}),e[65]=h,e[66]=f,e[67]=p):p=e[67];let z;e[68]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(Ke,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-on-surface-variant"}),e[68]=z):z=e[68];let W;e[69]===Symbol.for("react.memo_cache_sentinel")?(W=a=>Ge(a.target.value),e[69]=W):W=e[69];let u;e[70]!==s?(u=t.jsx("input",{type:"text",placeholder:"Cari nama atau NIS siswa...",value:s,onChange:W,className:"m3-input pl-12"}),e[70]=s,e[71]=u):u=e[71];let b;e[72]!==ye||e[73]!==u?(b=t.jsxs("form",{onSubmit:ye,className:"relative",children:[z,u]}),e[72]=ye,e[73]=u,e[74]=b):b=e[74];let Y;e[75]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(Me,{className:"w-4 h-4"}),e[75]=Y):Y=e[75];let j;e[76]!==Se?(j=t.jsxs("button",{type:"button",className:"m3-button-tonal",onClick:Se,children:[Y,"Print Nilai Semua Siswa"]}),e[76]=Se,e[77]=j):j=e[77];let O;e[78]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(ze,{className:"w-4 h-4"}),e[78]=O):O=e[78];let N;e[79]!==we?(N=t.jsxs("button",{type:"button",className:"m3-button-filled",onClick:we,children:[O,"Download Nilai Semua Siswa (CSV)"]}),e[79]=we,e[80]=N):N=e[80];let Q;e[81]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsxs("div",{className:"flex items-center gap-2 text-on-surface-variant",children:[t.jsx(Qe,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Urutkan"})]}),e[81]=Q):Q=e[81];let g;e[82]!==x||e[83]!==l?(g=a=>x(a,l),e[82]=x,e[83]=l,e[84]=g):g=e[84];let X;e[85]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Ie,{className:"h-10 bg-surface min-w-[160px]",children:t.jsx($e,{placeholder:"Pilih"})}),e[85]=X):X=e[85];let Z;e[86]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsxs(Pe,{children:[t.jsx(T,{value:"name",children:"Nama"}),t.jsx(T,{value:"nis",children:"NIS"}),t.jsx(T,{value:"average",children:"Rata-rata"}),t.jsx(T,{value:"total_scores",children:"Jumlah Nilai"})]}),e[86]=Z):Z=e[86];let v;e[87]!==r||e[88]!==g?(v=t.jsxs(Ue,{value:r,onValueChange:g,children:[X,Z]}),e[87]=r,e[88]=g,e[89]=v):v=e[89];let y;e[90]!==x||e[91]!==r?(y=a=>x(r,a),e[90]=x,e[91]=r,e[92]=y):y=e[92];let ee;e[93]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Ie,{className:"h-10 bg-surface min-w-[120px]",children:t.jsx($e,{placeholder:"Arah"})}),e[93]=ee):ee=e[93];let te;e[94]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsxs(Pe,{children:[t.jsx(T,{value:"asc",children:"Naik"}),t.jsx(T,{value:"desc",children:"Turun"})]}),e[94]=te):te=e[94];let w;e[95]!==l||e[96]!==y?(w=t.jsxs(Ue,{value:l,onValueChange:y,children:[ee,te]}),e[95]=l,e[96]=y,e[97]=w):w=e[97];let S;e[98]!==v||e[99]!==w?(S=t.jsxs("div",{className:"flex items-center gap-2 md:ml-auto",children:[Q,v,w]}),e[98]=v,e[99]=w,e[100]=S):S=e[100];let _;e[101]!==j||e[102]!==N||e[103]!==S?(_=t.jsx("div",{className:"m3-card-elevated",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[j,N,S]})}),e[101]=j,e[102]=N,e[103]=S,e[104]=_):_=e[104];let ae;e[105]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("div",{className:"px-5 py-4 border-b border-border",children:t.jsx("h3",{className:"font-medium text-on-surface",children:"Daftar Siswa"})}),e[105]=ae):ae=e[105];let k;e[106]!==c.data?(k=t.jsxs("div",{className:"m3-card-elevated p-0 overflow-hidden",children:[ae,c.data.length>0?t.jsx("div",{className:"divide-y divide-border",children:c.data.map(et)}):t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Je,{className:"w-16 h-16 mx-auto text-on-surface-variant/30 mb-4"}),t.jsx("p",{className:"text-lg font-medium text-on-surface",children:"Tidak ada siswa ditemukan"}),t.jsx("p",{className:"text-on-surface-variant mt-1",children:"Coba kata kunci pencarian lain."})]})]}),e[106]=c.data,e[107]=k):k=e[107];let A;e[108]!==l||e[109]!==s||e[110]!==r||e[111]!==c.current_page||e[112]!==c.last_page?(A=c.last_page>1&&t.jsx("div",{className:"flex justify-center gap-2",children:Array.from({length:c.last_page},(a,n)=>t.jsx(Te,{href:`/reports/students?page=${n+1}&search=${encodeURIComponent(s)}&sort=${encodeURIComponent(r)}&direction=${encodeURIComponent(l)}`,className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${c.current_page===n+1?"bg-primary text-primary-foreground":"hover:bg-surface-variant text-on-surface-variant"}`,children:n+1},n+1))}),e[108]=l,e[109]=s,e[110]=r,e[111]=c.current_page,e[112]=c.last_page,e[113]=A):A=e[113];let se;return e[114]!==p||e[115]!==b||e[116]!==_||e[117]!==k||e[118]!==A?(se=t.jsxs(Fe,{title:"Rapor Siswa",showBack:!0,backUrl:"/dashboard",children:[J,t.jsxs("div",{className:"m3-container py-6 space-y-6",children:[p,b,_,k,A]})]}),e[114]=p,e[115]=b,e[116]=_,e[117]=k,e[118]=A,e[119]=se):se=e[119],se}function et(i,e){return t.jsxs(Te,{href:`/reports/students/${i.id}`,className:"m3-list-item group animate-m3-fade",style:{animationDelay:`${e*50}ms`},children:[t.jsx("div",{className:"w-11 h-11 rounded-full bg-secondary flex items-center justify-center",children:t.jsx(We,{className:"w-5 h-5 text-secondary-foreground"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-on-surface truncate",children:i.name}),t.jsxs("p",{className:"text-sm text-on-surface-variant",children:["NIS: ",i.nis," • ",i.total_scores," nilai"]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),window.open(`/reports/students/${i.id}?print=1`,"_blank")},className:"w-9 h-9 rounded-full flex items-center justify-center hover:bg-primary/10 transition-colors","aria-label":`Print rapor ${i.name}`,title:"Print rapor",children:t.jsx(Me,{className:"w-4 h-4 text-primary"})}),t.jsxs("div",{className:"text-right hidden xs:block",children:[t.jsx("p",{className:"text-lg font-bold text-primary",children:i.average!==null?i.average:"-"}),t.jsx("p",{className:"text-[10px] uppercase font-bold text-on-surface-variant",children:"Rata-rata"})]}),t.jsx(Ye,{className:"w-5 h-5 text-on-surface-variant group-hover:translate-x-1 transition-transform"})]})]},i.id)}function tt(i,e){return t.jsxs("tr",{children:[t.jsx("td",{className:"border border-black px-2 py-1 text-center",children:e+1}),t.jsx("td",{className:"border border-black px-2 py-1",children:i.nis}),t.jsx("td",{className:"border border-black px-2 py-1",children:i.name}),t.jsx("td",{className:"border border-black px-2 py-1 text-center",children:i.average??"-"}),t.jsx("td",{className:"border border-black px-2 py-1 text-center",children:i.total_scores})]},i.id)}function at(){window.print()}export{vt as default};
