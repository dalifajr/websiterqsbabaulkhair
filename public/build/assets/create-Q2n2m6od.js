import{c as ge,a as E,u as je,j as t,H as Se}from"./app-Ci7CDRNd.js";import{A as be}from"./mobile-layout-C3OyDd1n.js";import{L as X}from"./label-DuoTJX7v.js";import{c as oe,b as me,S as fe,a as ue,d as pe}from"./select-C8NgR5qa.js";import{S as ye}from"./switch-CwBigSJL.js";import{C as he}from"./checkbox-C-WAHfRi.js";import{F as Ne}from"./app-sidebar-CPzjeIVL.js";/* empty css            */import"./index-BLUAye1L.js";import"./graduation-cap-Dz_krzqH.js";import"./x-B-c32jvu.js";import"./index-i1tW4-ja.js";import"./index-CLv57PmX.js";import"./chevron-down-CNcQHhh-.js";import"./check-DhXh2-Vo.js";import"./layout-dashboard-CjqitNLP.js";import"./users-vzg2hPAy.js";function qe(a){const e=ge.c(89),{classGroups:Y,terms:Z,enrollments:ee}=a,[l,xe]=E.useState(""),[n,_e]=E.useState("");let R;e[0]===Symbol.for("react.memo_cache_sentinel")?(R=[],e[0]=R):R=e[0];const[i,G]=E.useState(R),[d,ne]=E.useState(!1);let P;e[1]===Symbol.for("react.memo_cache_sentinel")?(P=[],e[1]=P):P=e[1];let T;e[2]===Symbol.for("react.memo_cache_sentinel")?(T={class_group_id:"",term_id:"",enrollment_ids:P,generate_all:!0},e[2]=T):T=e[2];const{data:r,setData:m,post:te,processing:de,errors:c}=je(T);let A;if(e[3]!==ee||e[4]!==l){let s;e[6]!==l?(s=ce=>ce.class_group_id?.toString()===l,e[6]=l,e[7]=s):s=e[7],A=ee.filter(s),e[3]=ee,e[4]=l,e[5]=A}else A=e[5];const o=A;let F;e[8]!==o||e[9]!==d?(F=()=>{G(d?o.map(Ce):[])},e[8]=o,e[9]=d,e[10]=F):F=e[10];let L;e[11]!==d||e[12]!==l?(L=[d,l],e[11]=d,e[12]=l,e[13]=L):L=e[13],E.useEffect(F,L);let V;e[14]!==r||e[15]!==l||e[16]!==i||e[17]!==n||e[18]!==m?(V=()=>{m({...r,class_group_id:l,term_id:n,enrollment_ids:i})},e[14]=r,e[15]=l,e[16]=i,e[17]=n,e[18]=m,e[19]=V):V=e[19];let D;e[20]!==l||e[21]!==i||e[22]!==n?(D=[l,n,i],e[20]=l,e[21]=i,e[22]=n,e[23]=D):D=e[23],E.useEffect(V,D);let H;e[24]!==te?(H=s=>{s.preventDefault(),te("/admin/report-cards")},e[24]=te,e[25]=H):H=e[25];const se=H;let I;e[26]!==i?(I=s=>{i.includes(s)?G(i.filter(ce=>ce!==s)):G([...i,s])},e[26]=i,e[27]=I):I=e[27];const B=I;let K;e[28]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(Se,{title:"Generate Rapor"}),e[28]=K):K=e[28];let U;e[29]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(X,{children:"Semester"}),e[29]=U):U=e[29];const le=c.term_id?"border-destructive":"";let $;e[30]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(oe,{placeholder:"Pilih semester"}),e[30]=$):$=e[30];let f;e[31]!==le?(f=t.jsx(me,{className:le,children:$}),e[31]=le,e[32]=f):f=e[32];let u;e[33]!==Z?(u=Z.map(ve),e[33]=Z,e[34]=u):u=e[34];let h;e[35]!==u?(h=t.jsx(fe,{children:u}),e[35]=u,e[36]=h):h=e[36];let p;e[37]!==n||e[38]!==f||e[39]!==h?(p=t.jsxs(ue,{value:n,onValueChange:_e,children:[f,h]}),e[37]=n,e[38]=f,e[39]=h,e[40]=p):p=e[40];let x;e[41]!==c.term_id?(x=c.term_id&&t.jsx("p",{className:"text-sm text-destructive",children:c.term_id}),e[41]=c.term_id,e[42]=x):x=e[42];let _;e[43]!==p||e[44]!==x?(_=t.jsxs("div",{className:"space-y-2",children:[U,p,x]}),e[43]=p,e[44]=x,e[45]=_):_=e[45];let q;e[46]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(X,{children:"Kelas"}),e[46]=q):q=e[46];const ie=c.class_group_id?"border-destructive":"";let z;e[47]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(oe,{placeholder:"Pilih kelas"}),e[47]=z):z=e[47];let g;e[48]!==ie?(g=t.jsx(me,{className:ie,children:z}),e[48]=ie,e[49]=g):g=e[49];let j;e[50]!==Y?(j=Y.map(ke),e[50]=Y,e[51]=j):j=e[51];let S;e[52]!==j?(S=t.jsx(fe,{children:j}),e[52]=j,e[53]=S):S=e[53];let b;e[54]!==l||e[55]!==g||e[56]!==S?(b=t.jsxs(ue,{value:l,onValueChange:xe,children:[g,S]}),e[54]=l,e[55]=g,e[56]=S,e[57]=b):b=e[57];let y;e[58]!==c.class_group_id?(y=c.class_group_id&&t.jsx("p",{className:"text-sm text-destructive",children:c.class_group_id}),e[58]=c.class_group_id,e[59]=y):y=e[59];let N;e[60]!==b||e[61]!==y?(N=t.jsxs("div",{className:"space-y-2",children:[q,b,y]}),e[60]=b,e[61]=y,e[62]=N):N=e[62];let J;e[63]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs("div",{children:[t.jsx(X,{children:"Generate untuk Semua Siswa"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Rapor akan di-generate untuk semua siswa di kelas ini"})]}),e[63]=J):J=e[63];let k;e[64]!==m?(k=s=>{m("generate_all",s),s&&ne(!0)},e[64]=m,e[65]=k):k=e[65];let v;e[66]!==r.generate_all||e[67]!==k?(v=t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[J,t.jsx(ye,{checked:r.generate_all,onCheckedChange:k})]}),e[66]=r.generate_all,e[67]=k,e[68]=v):v=e[68];let C;e[69]!==r.generate_all||e[70]!==o||e[71]!==d||e[72]!==l||e[73]!==i||e[74]!==B?(C=!r.generate_all&&l&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(X,{children:"Pilih Siswa"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(he,{id:"select-all",checked:d,onCheckedChange:s=>ne(!!s)}),t.jsx("label",{htmlFor:"select-all",className:"text-sm",children:"Pilih Semua"})]})]}),t.jsxs("div",{className:"max-h-64 overflow-y-auto rounded-lg border divide-y",children:[o.map(s=>t.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>B(s.id),children:[t.jsx(he,{checked:i.includes(s.id),onCheckedChange:()=>B(s.id)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium",children:s.student?.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:s.student?.nis})]})]},s.id)),o.length===0&&t.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Tidak ada siswa di kelas ini"})]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," siswa dipilih"]})]}),e[69]=r.generate_all,e[70]=o,e[71]=d,e[72]=l,e[73]=i,e[74]=B,e[75]=C):C=e[75];let M;e[76]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("p",{className:"font-medium mb-2",children:"Informasi:"}),e[76]=M):M=e[76];let O;e[77]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm text-muted-foreground",children:[M,t.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[t.jsx("li",{children:"Rapor akan di-generate berdasarkan nilai yang sudah diinput"}),t.jsx("li",{children:"Nilai akhir dihitung dari bobot setiap kategori penilaian"}),t.jsx("li",{children:"Peringkat kelas akan dihitung otomatis"}),t.jsx("li",{children:"Rapor yang sudah dikunci tidak dapat diedit"})]})]}),e[77]=O):O=e[77];const ae=de||!r.generate_all&&i.length===0;let Q;e[78]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(Ne,{className:"w-5 h-5"}),e[78]=Q):Q=e[78];const re=de?"Generating...":"Generate Rapor";let w;e[79]!==ae||e[80]!==re?(w=t.jsxs("button",{type:"submit",disabled:ae,className:"m3-button-filled w-full",children:[Q,re]}),e[79]=ae,e[80]=re,e[81]=w):w=e[81];let W;return e[82]!==se||e[83]!==_||e[84]!==N||e[85]!==v||e[86]!==C||e[87]!==w?(W=t.jsxs(be,{title:"Generate Rapor",showBack:!0,backUrl:"/admin/report-cards",children:[K,t.jsx("div",{className:"m3-container py-6 space-y-6",children:t.jsxs("form",{onSubmit:se,className:"space-y-6",children:[_,N,v,C,O,w]})})]}),e[82]=se,e[83]=_,e[84]=N,e[85]=v,e[86]=C,e[87]=w,e[88]=W):W=e[88],W}function ke(a){return t.jsx(pe,{value:a.id.toString(),children:a.name},a.id)}function ve(a){return t.jsxs(pe,{value:a.id.toString(),children:[a.name," - ",a.academic_year?.name]},a.id)}function Ce(a){return a.id}export{qe as default};
