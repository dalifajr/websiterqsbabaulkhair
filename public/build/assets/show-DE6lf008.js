import{c as Oe,u as We,a as Ye,j as t,H as Ve,L as qe}from"./app-LrsKmx93.js";import{A as Je}from"./mobile-layout-X8LYD6LL.js";import{a as Qe,b as Xe,c as Ze,S as et,d as tt}from"./select-CKnaOWM9.js";import{C as st}from"./clipboard-check-D9mgopzf.js";import{c as at}from"./graduation-cap--arkKicv.js";import{P as lt}from"./printer-BsCrQv95.js";import{U as it}from"./users-DpbnXvSk.js";/* empty css            */import"./app-sidebar-BJ8KpaQ-.js";import"./index-p0syaNOC.js";import"./x-Db2KilOX.js";import"./index-DFJIUhka.js";import"./layout-dashboard-DVszlXo4.js";import"./index-MyzOAZUl.js";import"./chevron-down-BtslHCse.js";import"./check-BK6fB0Ik.js";const rt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ct=at("CircleCheck",rt),Ke={unmarked:"Belum",present:"Hadir",absent:"Alpha",sick:"Sakit",permit:"Izin"};function Ct(r){const e=Oe.c(150),{assignment:s,session:d,rows:o,summary:a,printMode:X,letterhead:f,meta:m}=r;let h;e[0]!==o?(h=o.map(mt),e[0]=o,e[1]=h):h=e[1];let ee;e[2]!==h?(ee={records:h},e[2]=h,e[3]=ee):ee=e[3];const{data:n,setData:p,post:Le,processing:x}=We(ee);let te,se;e[4]!==X?(te=()=>{if(!X)return;const i=window.setTimeout(ot,250);return()=>window.clearTimeout(i)},se=[X],e[4]=X,e[5]=te,e[6]=se):(te=e[5],se=e[6]),Ye.useEffect(te,se);let ae;e[7]!==n.records||e[8]!==p?(ae=(i,l)=>{p("records",n.records.map(c=>c.student_id===i?{...c,status:l}:c))},e[7]=n.records,e[8]=p,e[9]=ae):ae=e[9];const Z=ae;let le;e[10]!==n.records||e[11]!==p?(le=i=>{p("records",n.records.map(l=>({...l,status:i})))},e[10]=n.records,e[11]=p,e[12]=le):le=e[12];const u=le;let ie;e[13]!==s.id||e[14]!==Le||e[15]!==d.id?(ie=()=>{Le(`/assessments/${s.id}/attendance/${d.id}`)},e[13]=s.id,e[14]=Le,e[15]=d.id,e[16]=ie):ie=e[16];const Te=ie;if(X){const i=!!f?.enabled,l=f?.line1||f?.schoolName||"",c=f?.line2||"",be=f?.line3||"";let je;e[17]!==m?(je=m?.date?new Date(m.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):new Date().toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),e[17]=m,e[18]=je):je=e[18];const Pe=je;let Ne,ve;e[19]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(Ve,{title:"Print Absensi"}),Ne=t.jsx("style",{children:`
                    @page { size: A4; margin: 8mm; }
                    html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: #fff !important; color: #000 !important; }
                `}),e[19]=Ne,e[20]=ve):(Ne=e[19],ve=e[20]);let F;e[21]!==f||e[22]!==i||e[23]!==l||e[24]!==c||e[25]!==be?(F=i&&t.jsxs("div",{className:"flex gap-3 items-start pb-2 mb-2 border-b border-black",children:[f?.logoUrl&&t.jsx("img",{src:f.logoUrl,alt:"Logo",className:"w-12 h-12 object-contain"}),t.jsxs("div",{className:"flex-1",children:[l&&t.jsx("div",{className:"text-sm font-bold leading-5",children:l}),c&&t.jsx("div",{className:"text-[11px]",children:c}),be&&t.jsx("div",{className:"text-[11px]",children:be})]})]}),e[21]=f,e[22]=i,e[23]=l,e[24]=c,e[25]=be,e[26]=F):F=e[26];let ge;e[27]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("div",{className:"text-sm font-bold",children:"DAFTAR HADIR SISWA"}),e[27]=ge):ge=e[27];let M;e[28]!==Pe?(M=t.jsxs("div",{className:"text-center mb-2",children:[ge,t.jsxs("div",{className:"text-[11px]",children:["Tanggal: ",Pe]})]}),e[28]=Pe,e[29]=M):M=e[29];let ye;e[30]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx("div",{className:"w-24",children:"Semester"}),e[30]=ye):ye=e[30];const Re=m?.term||s.term.name;let G;e[31]!==Re?(G=t.jsxs("div",{className:"flex gap-2",children:[ye,t.jsxs("div",{children:[": ",Re]})]}),e[31]=Re,e[32]=G):G=e[32];let _e;e[33]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("div",{className:"w-24",children:"Tahun Ajaran"}),e[33]=_e):_e=e[33];const ze=m?.academicYear||s.term.academic_year.name;let V;e[34]!==ze?(V=t.jsxs("div",{className:"flex gap-2",children:[_e,t.jsxs("div",{children:[": ",ze]})]}),e[34]=ze,e[35]=V):V=e[35];let ke;e[36]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx("div",{className:"w-24",children:"Kelas"}),e[36]=ke):ke=e[36];const Be=m?.classGroup||s.class_group.name;let K;e[37]!==Be?(K=t.jsxs("div",{className:"flex gap-2",children:[ke,t.jsxs("div",{children:[": ",Be]})]}),e[37]=Be,e[38]=K):K=e[38];let Se;e[39]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx("div",{className:"w-24",children:"Guru"}),e[39]=Se):Se=e[39];const Fe=m?.teacher||s.teacher.name;let O;e[40]!==Fe?(O=t.jsxs("div",{className:"flex gap-2",children:[Se,t.jsxs("div",{children:[": ",Fe]})]}),e[40]=Fe,e[41]=O):O=e[41];let we;e[42]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx("div",{className:"w-24",children:"Mapel"}),e[42]=we):we=e[42];const Me=m?.subject||s.subject.name;let W;e[43]!==Me?(W=t.jsxs("div",{className:"flex gap-2",children:[we,t.jsxs("div",{children:[": ",Me]})]}),e[43]=Me,e[44]=W):W=e[44];let Ae;e[45]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx("div",{className:"w-24",children:"Topik"}),e[45]=Ae):Ae=e[45];const Ge=m?.topic||d.topic||"-";let Y;e[46]!==Ge?(Y=t.jsxs("div",{className:"flex gap-2",children:[Ae,t.jsxs("div",{children:[": ",Ge]})]}),e[46]=Ge,e[47]=Y):Y=e[47];let q;e[48]!==G||e[49]!==V||e[50]!==K||e[51]!==O||e[52]!==W||e[53]!==Y?(q=t.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 mb-2",children:[G,V,K,O,W,Y]}),e[48]=G,e[49]=V,e[50]=K,e[51]=O,e[52]=W,e[53]=Y,e[54]=q):q=e[54];let Ce;e[55]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-100",children:[t.jsx("th",{className:"border border-black px-2 py-1 text-center w-10",children:"No"}),t.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"NIS"}),t.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"Nama"}),t.jsx("th",{className:"border border-black px-2 py-1 text-left w-28",children:"Status"}),t.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"Catatan"})]})}),e[55]=Ce):Ce=e[55];let J;e[56]!==o?(J=o.length>0?o.map(dt):t.jsx("tr",{children:t.jsx("td",{className:"border border-black px-2 py-2",colSpan:5,children:"Tidak ada data."})}),e[56]=o,e[57]=J):J=e[57];let Q;e[58]!==J?(Q=t.jsxs("table",{className:"w-full border border-black border-collapse",children:[Ce,t.jsx("tbody",{children:J})]}),e[58]=J,e[59]=Q):Q=e[59];let De;return e[60]!==F||e[61]!==M||e[62]!==q||e[63]!==Q?(De=t.jsxs(t.Fragment,{children:[ve,Ne,t.jsxs("div",{className:"p-4 print:p-0 text-[11px] leading-4 text-black bg-white",children:[F,M,q,Q]})]}),e[60]=F,e[61]=M,e[62]=q,e[63]=Q,e[64]=De):De=e[64],De}const Ie=`/assessments/${s.id}/attendance`,$e=`Absensi ${d.meeting_date} - ${s.subject.name}`;let b;e[65]!==$e?(b=t.jsx(Ve,{title:$e}),e[65]=$e,e[66]=b):b=e[66];let j;e[67]!==s.subject.name?(j=t.jsx("h2",{className:"text-xl font-semibold text-on-surface",children:s.subject.name}),e[67]=s.subject.name,e[68]=j):j=e[68];let N;e[69]!==s.class_group.name||e[70]!==d.meeting_date?(N=t.jsxs("p",{className:"text-on-surface-variant mt-1",children:[s.class_group.name," â€¢ ",d.meeting_date]}),e[69]=s.class_group.name,e[70]=d.meeting_date,e[71]=N):N=e[71];const He=d.topic||"Tanpa topik";let v;e[72]!==He?(v=t.jsx("p",{className:"text-sm text-on-surface-variant mt-1",children:He}),e[72]=He,e[73]=v):v=e[73];let g;e[74]!==j||e[75]!==N||e[76]!==v?(g=t.jsxs("div",{children:[j,N,v]}),e[74]=j,e[75]=N,e[76]=v,e[77]=g):g=e[77];let re;e[78]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("div",{className:"w-11 h-11 rounded-xl bg-surface-variant flex items-center justify-center",children:t.jsx(st,{className:"w-5 h-5 text-on-surface-variant"})}),e[78]=re):re=e[78];let y;e[79]!==g?(y=t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[g,re]}),e[79]=g,e[80]=y):y=e[80];let ce;e[81]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("p",{className:"text-xs text-on-surface-variant",children:"Hadir"}),e[81]=ce):ce=e[81];let _;e[82]!==a.present?(_=t.jsxs("div",{className:"rounded-xl bg-surface-variant/40 p-3",children:[ce,t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:a.present})]}),e[82]=a.present,e[83]=_):_=e[83];let ne;e[84]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("p",{className:"text-xs text-on-surface-variant",children:"Alpha"}),e[84]=ne):ne=e[84];let k;e[85]!==a.absent?(k=t.jsxs("div",{className:"rounded-xl bg-surface-variant/40 p-3",children:[ne,t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:a.absent})]}),e[85]=a.absent,e[86]=k):k=e[86];let de;e[87]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("p",{className:"text-xs text-on-surface-variant",children:"Sakit"}),e[87]=de):de=e[87];let S;e[88]!==a.sick?(S=t.jsxs("div",{className:"rounded-xl bg-surface-variant/40 p-3",children:[de,t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:a.sick})]}),e[88]=a.sick,e[89]=S):S=e[89];let oe;e[90]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("p",{className:"text-xs text-on-surface-variant",children:"Izin"}),e[90]=oe):oe=e[90];let w;e[91]!==a.permit?(w=t.jsxs("div",{className:"rounded-xl bg-surface-variant/40 p-3",children:[oe,t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:a.permit})]}),e[91]=a.permit,e[92]=w):w=e[92];let me;e[93]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("p",{className:"text-xs text-on-surface-variant",children:"Belum"}),e[93]=me):me=e[93];let A;e[94]!==a.unmarked?(A=t.jsxs("div",{className:"rounded-xl bg-surface-variant/40 p-3",children:[me,t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:a.unmarked})]}),e[94]=a.unmarked,e[95]=A):A=e[95];let xe;e[96]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("p",{className:"text-xs text-on-surface-variant",children:"Total"}),e[96]=xe):xe=e[96];let C;e[97]!==a.total?(C=t.jsxs("div",{className:"rounded-xl bg-surface-variant/40 p-3",children:[xe,t.jsx("p",{className:"text-lg font-semibold text-on-surface",children:a.total})]}),e[97]=a.total,e[98]=C):C=e[98];let D;e[99]!==_||e[100]!==k||e[101]!==S||e[102]!==w||e[103]!==A||e[104]!==C?(D=t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 mt-5",children:[_,k,S,w,A,C]}),e[99]=_,e[100]=k,e[101]=S,e[102]=w,e[103]=A,e[104]=C,e[105]=D):D=e[105];let L;e[106]!==y||e[107]!==D?(L=t.jsxs("div",{className:"m3-card-elevated bg-gradient-to-br from-primary/5 to-secondary/5",children:[y,D]}),e[106]=y,e[107]=D,e[108]=L):L=e[108];let T;e[109]!==u?(T=()=>u("present"),e[109]=u,e[110]=T):T=e[110];let fe;e[111]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ct,{className:"w-4 h-4"}),e[111]=fe):fe=e[111];let I;e[112]!==x||e[113]!==T?(I=t.jsxs("button",{type:"button",className:"m3-button-tonal",onClick:T,disabled:x,children:[fe,"Hadir Semua"]}),e[112]=x,e[113]=T,e[114]=I):I=e[114];let $;e[115]!==u?($=()=>u("unmarked"),e[115]=u,e[116]=$):$=e[116];let H;e[117]!==x||e[118]!==$?(H=t.jsx("button",{type:"button",className:"m3-button-tonal",onClick:$,disabled:x,children:"Reset"}),e[117]=x,e[118]=$,e[119]=H):H=e[119];const Ue=`/assessments/${s.id}/attendance/${d.id}?print=1`;let he;e[120]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(lt,{className:"w-4 h-4"}),e[120]=he):he=e[120];let U;e[121]!==Ue?(U=t.jsxs(qe,{href:Ue,className:"m3-button-tonal",children:[he,"Print"]}),e[121]=Ue,e[122]=U):U=e[122];const Ee=x?"Menyimpan...":"Simpan Absensi";let E;e[123]!==x||e[124]!==Te||e[125]!==Ee?(E=t.jsx("button",{type:"button",className:"m3-button-filled md:ml-auto",onClick:Te,disabled:x,children:Ee}),e[123]=x,e[124]=Te,e[125]=Ee,e[126]=E):E=e[126];let P;e[127]!==I||e[128]!==H||e[129]!==U||e[130]!==E?(P=t.jsx("div",{className:"m3-card-elevated",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[I,H,U,E]})}),e[127]=I,e[128]=H,e[129]=U,e[130]=E,e[131]=P):P=e[131];let pe;e[132]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsxs("div",{className:"px-5 py-4 border-b border-border flex items-center gap-2",children:[t.jsx(it,{className:"w-4 h-4 text-on-surface-variant"}),t.jsx("h3",{className:"font-medium text-on-surface",children:"Daftar Siswa"})]}),e[132]=pe):pe=e[132];let R;if(e[133]!==n.records||e[134]!==o||e[135]!==Z){let i;e[137]!==n.records||e[138]!==Z?(i=l=>t.jsxs("div",{className:"m3-list-item",children:[t.jsx("div",{className:"w-11 h-11 rounded-xl bg-surface-variant flex items-center justify-center font-bold text-on-surface-variant",children:l.student.name.slice(0,1).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-on-surface truncate",children:l.student.name}),t.jsxs("p",{className:"text-sm text-on-surface-variant",children:["NIS: ",l.student.nis]})]}),t.jsx("div",{className:"min-w-[140px]",children:t.jsxs(Qe,{value:n.records.find(c=>c.student_id===l.student.id)?.status||"unmarked",onValueChange:c=>Z(l.student.id,c),children:[t.jsx(Xe,{className:"h-10 bg-surface",children:t.jsx(Ze,{placeholder:"Pilih"})}),t.jsx(et,{children:Object.entries(Ke).map(nt)})]})})]},l.student.id),e[137]=n.records,e[138]=Z,e[139]=i):i=e[139],R=o.map(i),e[133]=n.records,e[134]=o,e[135]=Z,e[136]=R}else R=e[136];let z;e[140]!==R?(z=t.jsxs("div",{className:"m3-card-elevated p-0 overflow-hidden",children:[pe,t.jsx("div",{className:"divide-y divide-border",children:R})]}),e[140]=R,e[141]=z):z=e[141];let B;e[142]!==L||e[143]!==P||e[144]!==z?(B=t.jsxs("div",{className:"m3-container py-6 space-y-6",children:[L,P,z]}),e[142]=L,e[143]=P,e[144]=z,e[145]=B):B=e[145];let ue;return e[146]!==b||e[147]!==B||e[148]!==Ie?(ue=t.jsxs(Je,{title:"Detail Absensi",showBack:!0,backUrl:Ie,children:[b,B]}),e[146]=b,e[147]=B,e[148]=Ie,e[149]=ue):ue=e[149],ue}function nt(r){const[e,s]=r;return t.jsx(tt,{value:e,children:s},e)}function dt(r,e){return t.jsxs("tr",{children:[t.jsx("td",{className:"border border-black px-2 py-1 text-center",children:e+1}),t.jsx("td",{className:"border border-black px-2 py-1",children:r.student.nis}),t.jsx("td",{className:"border border-black px-2 py-1",children:r.student.name}),t.jsx("td",{className:"border border-black px-2 py-1",children:Ke[r.status]}),t.jsx("td",{className:"border border-black px-2 py-1",children:r.note||""})]},r.student.id)}function ot(){window.print()}function mt(r){return{student_id:r.student.id,status:r.status}}export{Ct as default};
