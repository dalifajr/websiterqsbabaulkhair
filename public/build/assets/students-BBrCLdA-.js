import{a as x,j as e,H as g,u as I,L as w}from"./app-Ci7CDRNd.js";import{A as L}from"./mobile-layout-C3OyDd1n.js";import{D as P,a as U,b as $,c as B,d as E,e as K,f as _}from"./dialog-CYzcUf7y.js";import{C as F}from"./checkbox-C-WAHfRi.js";import{G}from"./graduation-cap-Dz_krzqH.js";import{C as H}from"./layout-dashboard-CjqitNLP.js";import{P as O}from"./printer-BgvhSTKe.js";import{P as R}from"./plus-CK3fh7d-.js";import{U as z}from"./users-vzg2hPAy.js";/* empty css            */import"./app-sidebar-CPzjeIVL.js";import"./index-BLUAye1L.js";import"./x-B-c32jvu.js";import"./index-i1tW4-ja.js";import"./index-CLv57PmX.js";import"./check-DhXh2-Vo.js";function ne({assignment:a,students:c,availableStudents:t,printMode:h,letterhead:r,meta:i}){if(x.useEffect(()=>{if(!h)return;const s=window.setTimeout(()=>{window.print()},250);return()=>window.clearTimeout(s)},[h]),h){const s=!!r?.enabled,n=r?.line1||r?.schoolName||"",m=r?.line2||"",v=r?.line3||"",T=i?.date?new Date(i.date).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):new Date().toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsx(g,{title:"Print Daftar Siswa"}),e.jsx("style",{children:`
                    @page { size: A4; margin: 8mm; }
                    html, body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: #fff !important; color: #000 !important; }
                `}),e.jsxs("div",{className:"p-4 print:p-0 text-[11px] leading-4 text-black bg-white",children:[s&&e.jsxs("div",{className:"flex gap-3 items-start pb-2 mb-2 border-b border-black",children:[r?.logoUrl&&e.jsx("img",{src:r.logoUrl,alt:"Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{className:"flex-1",children:[n&&e.jsx("div",{className:"text-sm font-bold leading-5",children:n}),m&&e.jsx("div",{className:"text-[11px]",children:m}),v&&e.jsx("div",{className:"text-[11px]",children:v})]})]}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"DAFTAR SISWA"}),e.jsxs("div",{className:"text-[11px]",children:["Tanggal: ",T]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-1 mb-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24",children:"Semester"}),e.jsxs("div",{children:[": ",i?.term||"-"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24",children:"Tahun Ajaran"}),e.jsxs("div",{children:[": ",i?.academicYear||"-"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24",children:"Kelas"}),e.jsxs("div",{children:[": ",i?.classGroup||a.class_group.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24",children:"Guru"}),e.jsxs("div",{children:[": ",i?.teacher||a.teacher.name]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24",children:"Mapel"}),e.jsxs("div",{children:[": ",i?.subject||a.subject.name]})]}),e.jsx("div",{})]}),e.jsxs("table",{className:"w-full border border-black border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-black px-2 py-1 text-center w-10",children:"No"}),e.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"NIS"}),e.jsx("th",{className:"border border-black px-2 py-1 text-left",children:"Nama"})]})}),e.jsx("tbody",{children:c.length>0?c.map((j,A)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-black px-2 py-1 text-center",children:A+1}),e.jsx("td",{className:"border border-black px-2 py-1",children:j.nis}),e.jsx("td",{className:"border border-black px-2 py-1",children:j.name})]},j.id)):e.jsx("tr",{children:e.jsx("td",{className:"border border-black px-2 py-2",colSpan:3,children:"Belum ada siswa."})})})]})]})]})}const[y,u]=x.useState(!1),[l,d]=x.useState([]),{post:k,setData:S,reset:p,processing:o,errors:f,clearErrors:b}=I({student_ids:[]}),N=x.useMemo(()=>t.length>0&&l.length===t.length,[t.length,l.length]),D=s=>{d(n=>n.includes(s)?n.filter(m=>m!==s):[...n,s])},C=()=>{l.length!==0&&(b(),S("student_ids",l),k(`/assessments/${a.id}/students`,{onSuccess:()=>{d([]),p("student_ids"),u(!1)}}))};return e.jsxs(L,{title:"Daftar Siswa",showBack:!0,backUrl:`/assessments/${a.id}`,children:[e.jsx(g,{title:`Siswa - ${a.subject.name}`}),e.jsxs("div",{className:"m3-container py-6 space-y-6",children:[e.jsxs("div",{className:"m3-card-elevated bg-gradient-to-br from-primary/5 to-secondary/5",children:[e.jsx("h2",{className:"text-xl font-semibold text-on-surface mb-4",children:"Informasi Kelas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-surface-variant flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-on-surface-variant"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-on-surface-variant",children:"Kelas"}),e.jsx("p",{className:"text-base text-on-surface",children:a.class_group.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-surface-variant flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-on-surface-variant"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-on-surface-variant",children:"Semester"}),e.jsxs("p",{className:"text-base text-on-surface",children:[a.term.name," - ",a.term.academic_year.name]})]})]})]})]}),e.jsxs("div",{className:"m3-card-elevated p-0 overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-border flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-on-surface",children:"Siswa"}),e.jsx("p",{className:"text-sm text-on-surface-variant",children:"Kelola siswa untuk kelas ini."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{href:`/assessments/${a.id}/students?print=1`,className:"m3-button-tonal h-10",children:[e.jsx(O,{className:"w-4 h-4"}),"Print"]}),e.jsxs(P,{open:y,onOpenChange:u,children:[e.jsx(U,{asChild:!0,children:e.jsxs("button",{type:"button",className:"m3-button-tonal h-10",children:[e.jsx(R,{className:"w-4 h-4"}),"Tambah"]})}),e.jsxs($,{className:"bg-surface text-on-surface border-border",children:[e.jsxs(B,{children:[e.jsx(E,{children:"Tambah Siswa"}),e.jsxs(K,{children:["Pilih siswa yang akan dimasukkan ke kelas ",a.class_group.name,"."]})]}),t.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-on-surface-variant",children:[t.length," siswa tersedia"]}),e.jsx("button",{type:"button",className:"text-sm font-medium text-primary hover:underline",onClick:()=>d(N?[]:t.map(s=>s.id)),disabled:o,children:N?"Batal pilih semua":"Pilih semua"})]}),e.jsx("div",{className:"max-h-[50vh] overflow-auto rounded-xl border border-border divide-y divide-border",children:t.map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-surface-variant/30 transition-colors cursor-pointer",children:[e.jsx(F,{checked:l.includes(s.id),onCheckedChange:()=>D(s.id)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-on-surface truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-on-surface-variant",children:["NIS: ",s.nis]})]})]},s.id))}),f.student_ids?e.jsx("p",{className:"text-sm text-destructive",children:f.student_ids}):null]}):e.jsxs("div",{className:"rounded-xl border border-border p-6 text-center",children:[e.jsx("p",{className:"font-medium text-on-surface",children:"Tidak ada siswa yang bisa ditambahkan"}),e.jsx("p",{className:"text-sm text-on-surface-variant mt-1",children:"Semua siswa aktif sudah terdaftar di kelas ini."})]}),e.jsxs(_,{children:[e.jsx("button",{type:"button",className:"m3-button-tonal",onClick:()=>{d([]),p("student_ids"),b(),u(!1)},disabled:o,children:"Batal"}),e.jsx("button",{type:"button",className:"m3-button-filled",onClick:C,disabled:o||l.length===0,children:o?"Menyimpan...":`Tambah (${l.length})`})]})]})]})]})]}),c.length>0?e.jsx("div",{className:"divide-y divide-border",children:c.map(s=>e.jsxs("div",{className:"m3-list-item",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-surface-variant flex items-center justify-center font-bold text-on-surface-variant",children:s.name.slice(0,1).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-on-surface truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-on-surface-variant",children:["NIS: ",s.nis]})]})]},s.id))}):e.jsxs("div",{className:"p-10 text-center",children:[e.jsx(z,{className:"w-14 h-14 mx-auto text-on-surface-variant/30 mb-3"}),e.jsx("p",{className:"text-lg font-medium text-on-surface",children:"Belum ada siswa"}),e.jsx("p",{className:"text-on-surface-variant mt-1",children:"Tambahkan siswa terlebih dahulu."}),e.jsx(w,{href:`/assessments/${a.id}`,className:"m3-button-tonal mt-6 inline-flex",children:"Kembali"})]})]})]})]})}export{ne as default};
