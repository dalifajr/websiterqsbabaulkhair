import{c as q,a as $,j as t,r as U,H as z}from"./app-BKRXp40Z.js";import{A as G}from"./mobile-layout-CLCTF93r.js";import{T as J}from"./x-CunSLndO.js";import{C as Q}from"./chevron-down-Dso6wE8p.js";import{b as W}from"./app-sidebar-CYkn40d_.js";import{C as X}from"./check-1ylfPcJe.js";/* empty css            */import"./index-BBXlvfNf.js";import"./graduation-cap-mM4L8sj4.js";import"./index-CHEM0tN0.js";import"./layout-dashboard-DfaYvmA7.js";import"./users-07rPhrSb.js";function he(s){const e=q.c(42),{subjects:n,terms:A,selectedTermId:h}=s;let p;e[0]!==n?(p=()=>{const a={};return n.forEach(r=>{a[r.id]=r.kkm_value}),a},e[0]=n,e[1]=p):p=e[1];const[i,F]=$.useState(p),[B,H]=$.useState(!1),[g,D]=$.useState(!1),L=ae;let v;e[2]===Symbol.for("react.memo_cache_sentinel")?(v=(a,r)=>{const T=parseFloat(r)||0;F(I=>({...I,[a]:T})),H(!0)},e[2]=v):v=e[2];const O=v;let b;e[3]!==i||e[4]!==h?(b=()=>{if(!h)return;D(!0);const a=Object.entries(i).map(te);U.post("/admin/kkm/bulk",{term_id:h,kkm_data:a},{onSuccess:()=>{H(!1),D(!1)},onError:()=>{D(!1)}})},e[3]=i,e[4]=h,e[5]=b):b=e[5];const E=b,V=ee,R=Z;let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(z,{title:"KKM & Predikat"}),e[6]=j):j=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx("div",{className:"m3-card-elevated bg-gradient-to-br from-primary/5 to-tertiary/5",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-[18px] bg-primary/10 flex items-center justify-center",children:t.jsx(J,{className:"w-7 h-7 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-on-surface",children:"Kriteria Ketuntasan Minimal"}),t.jsx("p",{className:"text-on-surface-variant mt-1",children:"Atur KKM per mata pelajaran per semester"})]})]})}),e[7]=y):y=e[7];let N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("label",{className:"text-sm font-medium text-on-surface-variant mb-2 block",children:"Pilih Semester"}),e[8]=N):N=e[8];const P=h||"";let k;e[9]===Symbol.for("react.memo_cache_sentinel")?(k=a=>L(a.target.value),e[9]=k):k=e[9];let l;e[10]!==A?(l=A.map(Y),e[10]=A,e[11]=l):l=e[11];let c;e[12]!==P||e[13]!==l?(c=t.jsx("select",{value:P,onChange:k,className:"m3-input appearance-none pr-10",children:l}),e[12]=P,e[13]=l,e[14]=c):c=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(Q,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-on-surface-variant pointer-events-none"}),e[15]=_):_=e[15];let m;e[16]!==c?(m=t.jsxs("div",{className:"relative",children:[N,t.jsxs("div",{className:"relative",children:[c,_]})]}),e[16]=c,e[17]=m):m=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("p",{className:"text-sm font-medium text-on-surface-variant mb-3",children:"Keterangan Predikat:"}),e[18]=S):S=e[18];let K;e[19]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsxs("div",{className:"m3-card-outlined",children:[S,t.jsx("div",{className:"flex flex-wrap gap-2",children:[{code:"A",range:"90-100",desc:"Sangat Baik"},{code:"B",range:"80-89",desc:"Baik"},{code:"C",range:"70-79",desc:"Cukup"},{code:"D",range:"60-69",desc:"Kurang"},{code:"E",range:"<60",desc:"Sangat Kurang"}].map(a=>t.jsxs("span",{className:`text-xs px-3 py-1.5 rounded-full ${R(a.code)}`,children:[a.code," (",a.range,")"]},a.code))})]}),e[19]=K):K=e[19];let w;e[20]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx("h2",{className:"font-medium text-on-surface",children:"Daftar Mata Pelajaran"}),e[20]=w):w=e[20];let o;e[21]!==n.length?(o=t.jsxs("div",{className:"px-5 py-4 border-b border-border flex items-center justify-between",children:[w,t.jsxs("span",{className:"text-sm text-on-surface-variant",children:[n.length," mapel"]})]}),e[21]=n.length,e[22]=o):o=e[22];let d;if(e[23]!==i||e[24]!==n){let a;e[26]!==i?(a=(r,T)=>t.jsxs("div",{className:"px-5 py-4 flex items-center gap-4 animate-m3-fade",style:{animationDelay:`${T*30}ms`},children:[t.jsx("div",{className:"w-11 h-11 rounded-xl bg-secondary flex items-center justify-center flex-shrink-0",children:t.jsx(W,{className:"w-5 h-5 text-secondary-foreground"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-on-surface truncate",children:r.name}),t.jsx("p",{className:"text-sm text-on-surface-variant",children:r.category||"Umum"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:i[r.id]||70,onChange:I=>O(r.id,I.target.value),className:`w-20 h-10 rounded-xl border border-border bg-surface-container \r
                                                   text-center text-sm font-medium text-on-surface\r
                                                   focus:outline-none focus:ring-2 focus:ring-primary`}),t.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                                                    ${R(V(i[r.id]||70))}`,children:V(i[r.id]||70)})]})]},r.id),e[26]=i,e[27]=a):a=e[27],d=n.map(a),e[23]=i,e[24]=n,e[25]=d}else d=e[25];let f;e[28]!==d?(f=t.jsx("div",{className:"divide-y divide-border",children:d}),e[28]=d,e[29]=f):f=e[29];let u;e[30]!==o||e[31]!==f?(u=t.jsxs("div",{className:"m3-card-elevated p-0 overflow-hidden",children:[o,f]}),e[30]=o,e[31]=f,e[32]=u):u=e[32];let x;e[33]!==E||e[34]!==B||e[35]!==g?(x=B&&t.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4 bg-gradient-to-t from-background via-background to-transparent",children:t.jsxs("button",{onClick:E,disabled:g,className:"m3-button-filled w-full py-4",children:[t.jsx(X,{className:"w-5 h-5"}),g?"Menyimpan...":"Simpan Semua KKM"]})}),e[33]=E,e[34]=B,e[35]=g,e[36]=x):x=e[36];let C;e[37]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("div",{className:"bg-surface-variant/50 rounded-2xl p-4",children:t.jsx("p",{className:"text-sm text-on-surface-variant",children:"ðŸ’¡ KKM adalah nilai minimal yang harus dicapai siswa untuk dinyatakan tuntas. Nilai di bawah KKM akan ditandai dengan warna merah pada laporan nilai."})}),e[37]=C):C=e[37];let M;return e[38]!==m||e[39]!==u||e[40]!==x?(M=t.jsxs(G,{title:"KKM & Predikat",showBack:!0,backUrl:"/dashboard",children:[j,t.jsxs("div",{className:"m3-container py-6 space-y-6",children:[y,m,K,u,x,C]})]}),e[38]=m,e[39]=u,e[40]=x,e[41]=M):M=e[41],M}function Y(s){return t.jsxs("option",{value:s.id,children:[s.name," - ",s.academic_year?.name||"N/A"]},s.id)}function Z(s){switch(s){case"A":return"bg-chart-3/15 text-chart-3";case"B":return"bg-chart-4/15 text-chart-4";case"C":return"bg-primary/15 text-primary";case"D":return"bg-chart-5/15 text-chart-5";default:return"bg-destructive/15 text-destructive"}}function ee(s){return s>=90?"A":s>=80?"B":s>=70?"C":s>=60?"D":"E"}function te(s){const[e,n]=s;return{subject_id:parseInt(e),kkm_value:n}}function ae(s){U.get("/admin/kkm",{term_id:s},{preserveState:!0})}export{he as default};
