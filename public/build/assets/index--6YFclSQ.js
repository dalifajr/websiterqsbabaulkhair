import{c as R,a as Y,j as t,L as B,r as F,H as q}from"./app-BKRXp40Z.js";import{A as G}from"./mobile-layout-CLCTF93r.js";import{M as O}from"./message-circle-C5rhegzR.js";import{T as U}from"./triangle-alert-CGUQhSpW.js";import{A as z}from"./users-07rPhrSb.js";import{S as J}from"./square-pen-CQEY4pC1.js";import{T as Q}from"./trash-2-Cnj0BeTL.js";import{P as V}from"./plus-B7t01qVn.js";import{S as W}from"./search-CjwojjBA.js";/* empty css            */import"./app-sidebar-CYkn40d_.js";import"./index-BBXlvfNf.js";import"./x-CunSLndO.js";import"./graduation-cap-mM4L8sj4.js";import"./index-CHEM0tN0.js";import"./layout-dashboard-DfaYvmA7.js";const X={achievement:{label:"Prestasi",icon:z,color:"bg-green-100 text-green-700",dot:"bg-green-500"},violation:{label:"Pelanggaran",icon:U,color:"bg-red-100 text-red-700",dot:"bg-red-500"},counseling:{label:"Konseling",icon:O,color:"bg-blue-100 text-blue-700",dot:"bg-blue-500"}};function ve(n){const e=R.c(47),{notes:l,terms:D,filters:i}=n,[c,H]=Y.useState(i.search||"");let j;e[0]!==i?(j=(a,r)=>{F.get("/admin/behavioral-notes",{...i,[a]:r,page:void 0},{preserveState:!0})},e[0]=i,e[1]=j):j=e[1];const s=j;let b;e[2]!==s||e[3]!==c?(b=a=>{a.preventDefault(),s("search",c||null)},e[2]=s,e[3]=c,e[4]=b):b=e[4];const I=b,K=te;let N;e[5]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(q,{title:"Catatan Perilaku Siswa"}),e[5]=N):N=e[5];let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("h1",{className:"text-xl font-bold text-on-surface",children:"Catatan Perilaku"}),e[6]=_):_=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsxs("div",{className:"flex items-center justify-between",children:[_,t.jsxs(B,{href:"/admin/behavioral-notes/create",className:"m3-button-filled h-10 px-4 inline-flex items-center gap-2",children:[t.jsx(V,{className:"w-4 h-4"})," Tambah"]})]}),e[7]=y):y=e[7];let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-on-surface-variant"}),e[8]=S):S=e[8];let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w=a=>H(a.target.value),e[9]=w):w=e[9];let o;e[10]!==c?(o=t.jsxs("div",{className:"relative flex-1",children:[S,t.jsx("input",{type:"text",value:c,onChange:w,placeholder:"Cari nama siswa...",className:"m3-input pl-10 h-10"})]}),e[10]=c,e[11]=o):o=e[11];let m;e[12]!==I||e[13]!==o?(m=t.jsx("form",{onSubmit:I,className:"flex gap-2",children:o}),e[12]=I,e[13]=o,e[14]=m):m=e[14];const E=i.term_id||"";let d;e[15]!==s?(d=a=>s("term_id",a.target.value||null),e[15]=s,e[16]=d):d=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("option",{value:"",children:"Semua Semester"}),e[17]=C):C=e[17];let u;e[18]!==D?(u=D.map(ee),e[18]=D,e[19]=u):u=e[19];let x;e[20]!==E||e[21]!==d||e[22]!==u?(x=t.jsxs("select",{value:E,onChange:d,className:"m3-input h-9 text-sm min-w-[140px]",children:[C,u]}),e[20]=E,e[21]=d,e[22]=u,e[23]=x):x=e[23];const L=i.type||"";let f;e[24]!==s?(f=a=>s("type",a.target.value||null),e[24]=s,e[25]=f):f=e[25];let P,k,T,$;e[26]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("option",{value:"",children:"Semua Tipe"}),k=t.jsx("option",{value:"achievement",children:"Prestasi"}),T=t.jsx("option",{value:"violation",children:"Pelanggaran"}),$=t.jsx("option",{value:"counseling",children:"Konseling"}),e[26]=P,e[27]=k,e[28]=T,e[29]=$):(P=e[26],k=e[27],T=e[28],$=e[29]);let h;e[30]!==L||e[31]!==f?(h=t.jsxs("select",{value:L,onChange:f,className:"m3-input h-9 text-sm min-w-[120px]",children:[P,k,T,$]}),e[30]=L,e[31]=f,e[32]=h):h=e[32];let p;e[33]!==x||e[34]!==h?(p=t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1",children:[x,h]}),e[33]=x,e[34]=h,e[35]=p):p=e[35];let g;e[36]!==l.data?(g=l.data.length===0?t.jsx("div",{className:"m3-card-elevated p-8 text-center",children:t.jsx("p",{className:"text-on-surface-variant",children:"Belum ada catatan perilaku"})}):t.jsx("div",{className:"space-y-3",children:l.data.map(a=>{const r=X[a.type],M=r.icon;return t.jsx("div",{className:"m3-card-elevated p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`rounded-full p-2 ${r.color}`,children:t.jsx(M,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("h3",{className:"font-semibold text-on-surface truncate",children:a.student.name}),t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${r.color}`,children:[t.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r.dot}`}),r.label]})]}),t.jsxs("p",{className:"text-xs text-on-surface-variant mt-0.5",children:["NIS: ",a.student.nis]}),t.jsx("p",{className:"text-sm text-on-surface mt-2 line-clamp-3",children:a.description}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsx("span",{className:"text-xs text-on-surface-variant",children:new Date(a.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(B,{href:`/admin/behavioral-notes/${a.id}/edit`,children:t.jsx("button",{className:"p-1.5 rounded-full hover:bg-surface-container-high transition-colors",children:t.jsx(J,{className:"w-4 h-4 text-on-surface-variant"})})}),t.jsx("button",{onClick:()=>K(a.id),className:"p-1.5 rounded-full hover:bg-red-100 transition-colors",children:t.jsx(Q,{className:"w-4 h-4 text-red-500"})})]})]})]})]})},a.id)})}),e[36]=l.data,e[37]=g):g=e[37];let v;e[38]!==s||e[39]!==l.current_page||e[40]!==l.last_page?(v=l.last_page>1&&t.jsx("div",{className:"flex justify-center gap-2 pt-2",children:Array.from({length:l.last_page},Z).map(a=>t.jsx("button",{onClick:()=>s("page",String(a)),className:`w-8 h-8 rounded-full text-sm font-medium transition-colors ${a===l.current_page?"bg-primary text-primary-foreground":"text-on-surface-variant hover:bg-surface-container-high"}`,children:a},a))}),e[38]=s,e[39]=l.current_page,e[40]=l.last_page,e[41]=v):v=e[41];let A;return e[42]!==p||e[43]!==g||e[44]!==v||e[45]!==m?(A=t.jsxs(G,{title:"Catatan Perilaku",showBack:!0,backUrl:"/dashboard",children:[N,t.jsxs("div",{className:"m3-container py-6 space-y-4",children:[y,m,p,g,v]})]}),e[42]=p,e[43]=g,e[44]=v,e[45]=m,e[46]=A):A=e[46],A}function Z(n,e){return e+1}function ee(n){return t.jsxs("option",{value:n.id,children:[n.academic_year?.name," - ",n.name]},n.id)}function te(n){confirm("Yakin ingin menghapus catatan ini?")&&F.delete(`/admin/behavioral-notes/${n}`)}export{ve as default};
